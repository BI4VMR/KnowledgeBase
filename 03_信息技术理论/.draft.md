> 设计模式-概述

根据设计模式的参考书 Design Patterns - Elements of Reusable Object-Oriented Software（中文译名：设计模式 - 可复用的面向对象软件元素） 中所提到的，总共有 23 种设计模式。这些模式可以分为三大类：创建型模式（Creational Patterns）、结构型模式（Structural Patterns）、行为型模式（Behavioral Patterns）。当然，我们还会讨论另一类设计模式：J2EE 设计模式。
序号	模式 & 描述	包括
1	创建型模式
这些设计模式提供了一种在创建对象的同时隐藏创建逻辑的方式，而不是使用 new 运算符直接实例化对象。这使得程序在判断针对某个给定实例需要创建哪些对象时更加灵活。 	

    工厂模式（Factory Pattern）
    抽象工厂模式（Abstract Factory Pattern）
    单例模式（Singleton Pattern）
    建造者模式（Builder Pattern）
    原型模式（Prototype Pattern）

2	结构型模式
这些模式关注对象之间的组合和关系，旨在解决如何构建灵活且可复用的类和对象结构。 	

    适配器模式（Adapter Pattern）
    桥接模式（Bridge Pattern）
    过滤器模式（Filter、Criteria Pattern）
    组合模式（Composite Pattern）
    装饰器模式（Decorator Pattern）
    外观模式（Facade Pattern）
    享元模式（Flyweight Pattern）
    代理模式（Proxy Pattern）

3	行为型模式
这些模式关注对象之间的通信和交互，旨在解决对象之间的责任分配和算法的封装。 	

    责任链模式（Chain of Responsibility Pattern）
    命令模式（Command Pattern）
    解释器模式（Interpreter Pattern）
    迭代器模式（Iterator Pattern）
    中介者模式（Mediator Pattern）
    备忘录模式（Memento Pattern）
    观察者模式（Observer Pattern）
    状态模式（State Pattern）
    空对象模式（Null Object Pattern）
    策略模式（Strategy Pattern）
    模板模式（Template Pattern）
    访问者模式（Visitor Pattern）

4	J2EE 模式
这些设计模式特别关注表示层。这些模式是由 Sun Java Center 鉴定的。 	

    MVC 模式（MVC Pattern）
    业务代表模式（Business Delegate Pattern）
    组合实体模式（Composite Entity Pattern）
    数据访问对象模式（Data Access Object Pattern）
    前端控制器模式（Front Controller Pattern）
    拦截过滤器模式（Intercepting Filter Pattern）
    服务定位器模式（Service Locator Pattern）
    传输对象模式（Transfer Object Pattern）

下面用一个图片来整体描述一下设计模式之间的关系：

设计模式之间的关系
设计模式的优点

    提供了一种共享的设计词汇和概念，使开发人员能够更好地沟通和理解彼此的设计意图。
    提供了经过验证的解决方案，可以提高软件的可维护性、可复用性和灵活性。
    促进了代码的重用，避免了重复的设计和实现。
    通过遵循设计模式，可以减少系统中的错误和问题，提高代码质量。

设计模式的六大原则

1、开闭原则（Open Close Principle）

开闭原则的意思是：对扩展开放，对修改关闭。在程序需要进行拓展的时候，不能去修改原有的代码，实现一个热插拔的效果。简言之，是为了使程序的扩展性好，易于维护和升级。想要达到这样的效果，我们需要使用接口和抽象类，后面的具体设计中我们会提到这点。

2、里氏代换原则（Liskov Substitution Principle）

里氏代换原则是面向对象设计的基本原则之一。 里氏代换原则中说，任何基类可以出现的地方，子类一定可以出现。LSP 是继承复用的基石，只有当派生类可以替换掉基类，且软件单位的功能不受到影响时，基类才能真正被复用，而派生类也能够在基类的基础上增加新的行为。里氏代换原则是对开闭原则的补充。实现开闭原则的关键步骤就是抽象化，而基类与子类的继承关系就是抽象化的具体实现，所以里氏代换原则是对实现抽象化的具体步骤的规范。

3、依赖倒转原则（Dependence Inversion Principle）

这个原则是开闭原则的基础，具体内容：针对接口编程，依赖于抽象而不依赖于具体。

4、接口隔离原则（Interface Segregation Principle）

这个原则的意思是：使用多个隔离的接口，比使用单个接口要好。它还有另外一个意思是：降低类之间的耦合度。由此可见，其实设计模式就是从大型软件架构出发、便于升级和维护的软件设计思想，它强调降低依赖，降低耦合。

5、迪米特法则，又称最少知道原则（Demeter Principle）

最少知道原则是指：一个实体应当尽量少地与其他实体之间发生相互作用，使得系统功能模块相对独立。

6、合成复用原则（Composite Reuse Principle）

合成复用原则是指：尽量使用合成/聚合的方式，而不是使用继承。


---

> 操作系统 - CPU


1  处理器管理
1.1  进程
1.1.1  概述
早期的计算机一次只能运行单个程序，当某个程序开始运行时，将会独占系统的全部资源（处理器、存储设备、I/O设备等），其它用户必须等待当前程序执行完成后，才能使用计算机，这种方式的设备利用率极低。
单道程序的运行具有以下特征：
 顺序性
程序执行时严格按照预先规定的步骤推进。
 封闭性
程序执行时独占全部系统资源，外界无法进行干涉。
 可再现性
程序重复多次执行时，只要初始条件相同，结果必然也相同。
由于单道程序系统的低效率，人们设计了多道程序系统，多个程序在微观时间内交替执行，充分利用闲置的系统资源，以此提高系统利用率。
多个程序并发执行将会破坏单道程序的三个特性，有些程序的部分操作必须严格按照预定的顺序进行，否则会导致结果不一致的问题，因此需要引入“进程”进行管理。
进程(Process)是程序在一个数据集合（软/硬件环境）上的执行过程，也是系统分配资源与CPU调度的单位，与“程序”具有以下区别：
 动态性
进程反应程序的执行过程，具有创建、运行、暂停、销毁等状态，且拥有系统资源；程序是存储在介质中的代码，是静态的且不持有系统资源。
 并发性
进程能交替进入运行、暂停状态，与其它进程交替执行，程序不具有此特征。
 临时性
进程执行完毕后相关资源就被释放了，程序则是永久存在于介质中的。
1.1.2  进程状态机
进程有三个基本状态：
 运行(Running)
进程得到CPU资源，正在运行。单处理机系统同时只能运行一个进程；多处理机系统可能有多个进程同时运行。
 就绪(Ready)
进程除CPU以外的资源都已经就绪，但未被分配CPU资源，暂时无法运行。
 阻塞(Block)
正在等待I/O操作或同步事件完成，此时即便分配了CPU资源也无法运行。
状态机之间可以相互转换：
 运行与就绪
操作系统会将处于就绪状态的进程放置在一个队列中，当处理机空闲时，系统会根据优先级或其它因素选择进程，使其获得处理机资源并运行。当进程获得的CPU时间片用完后，进程会重新回到就绪状态，等待下一次调度。
 运行与阻塞
当进程需要等待I/O操作或同步事件时，将从运行进入阻塞状态。
 阻塞与就绪
当进程所需的其它资源满足时，将重新进入进入就绪队列，等待系统调度。
 
图 1-1 基本进程状态转换
除了三个基本状态，进程还可以有其它的状态：
 创建
系统为进程设置相关参数、分配资源，前期操作完成后将会加入就绪队列。
 退出
进程正常结束或崩溃后，系统将其从运行状态中移除，并释放系统资源。
 挂起
有些系统为了更精确的控制资源配置，还定义了挂起状态。当内存空间紧张时，可以将不重要的进程挂起，内存中的部分内容被写入外存储器交换空间，缓解系统负载。另一方面，用户可以观察暂停的进程，便于对程序进行调试。
 
图 1-2 扩展进程状态转换
1.1.3  进程控制块
进程控制块(Process Control Block,PCB)是进程的组成部分，用于描述进程的动态信息，如进程标识符、当前状态、优先级、创建者、父进程等，系统的资源调度模块根据PCB中的信息执行调度操作。
 
1.2  线程
1.2.1  概述
进程的应用使得计算机宏观上可以同时运行多个程序，资源利用率得到提高，但每个进程内部依然是顺序执行的，不能满足现代程序的需要。现代程序一般拥有多个线程，主线程用于控制GUI显示，及时响应用户操作；逻辑功能则通过子线程实现，这样执行耗时操作时GUI仍然能与用户交互，提升了用户体验。
线程是比进程更小的调度单位，切换进程时，需要保存原进程的CPU上下文，再装入新进程的CPU上下文，消耗了额外的资源，开销较大；线程则只涉及CPU算力的分配，切换速度较快，开销较小。


---

# 操作系统 - CPU

# 理论基础
## 进程与线程
进程是指程序的一次执行过程，它直接持有操作系统分配的内存、网络地址、I/O设备等资源。

线程是进程内部的任务，它只占用CPU计算资源，而不持有内存等其他资源。


