# ç®€ä»‹
Handleræ˜¯Androidä¸­çš„ä¸€ç§æ¶ˆæ¯é˜Ÿåˆ—ï¼Œèƒ½å¤Ÿå¯¹å¤šä¸ªä»»åŠ¡è¿›è¡Œæ’åºï¼Œå¹¶æŒ‰ç…§é¡ºåºä¾æ¬¡å¤„ç†æ¯ä¸ªä»»åŠ¡ã€‚Handleræ˜¯Android Frameworkå¤„ç†äº‹ä»¶åºåˆ—çš„å¸¸ç”¨å·¥å…·ï¼Œä¹Ÿæ˜¯Android UIä½“ç³»çš„åŸºç¡€å·¥å…·ã€‚

Handleræ‰€æ¶‰åŠçš„ç»„ä»¶åŠå·¥ä½œåŸç†å¯å‚è€ƒä¸‹æ–‡å›¾ç‰‡ï¼š

<div align="center">

![Handlerçš„å·¥ä½œåŸç†](./Assets_Handler/ç®€ä»‹_Handlerçš„å·¥ä½œåŸç†.jpg)

</div>

ä¸‹æ–‡åˆ—è¡¨å°†å¯¹Handlerä¸­çš„å„ä¸ªç»„ä»¶è¿›è¡Œè¯¦ç»†è¯´æ˜ï¼š

- `Message` : æ¶ˆæ¯ï¼ŒåŒ…æ‹¬ç±»å‹æ ‡è¯†ç¬¦ã€å‚æ•°ã€å›è°ƒæ–¹æ³•ç­‰ã€‚
- `MessageQueue` : æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”¨äºç®¡ç†å°šæœªè¢«å¤„ç†çš„æ¶ˆæ¯ï¼Œæ‰€æœ‰çš„æ¶ˆæ¯å°†æŒ‰ç…§å®ƒä»¬é¢„è®¡è¢«å¤„ç†çš„æ—¶åˆ»æ’åºã€‚
- `Looper` : è°ƒåº¦å™¨ï¼Œå½“æ¶ˆæ¯é˜Ÿåˆ—ä¸­æœ‰æ¶ˆæ¯æ—¶è´Ÿè´£å¤„ç†æ¶ˆæ¯ï¼Œæ— æ¶ˆæ¯æ—¶åˆ™é˜»å¡å¹¶ç­‰å¾…æ–°çš„æ¶ˆæ¯ã€‚æ¯ä¸ªçº¿ç¨‹æ‹¥æœ‰å”¯ä¸€çš„Looperå¯¹è±¡ï¼Œè¿™æ„å‘³ç€å¦‚æœæŸä¸ªæ¶ˆæ¯å¤„ç†è€—æ—¶è¿‡é•¿ï¼Œå°†ä¼šå¯¼è‡´å…¶ä»–æ¶ˆæ¯è¢«å»¶åå¤„ç†ã€‚
- `Handler` : è¯¥ç±»æ˜¯æˆ‘ä»¬å‘é€ä¸æ¥æ”¶æ¶ˆæ¯çš„è®¿é—®ç‚¹ã€‚

ä¸ç»å¤§å¤šæ•°æ“ä½œç³»ç»Ÿç›¸åŒï¼Œä¸ºäº†é¿å…å¤šçº¿ç¨‹æ›´æ–°UIå¯¼è‡´çŠ¶æ€ä¸ä¸€è‡´ã€æ­»é”ç­‰é—®é¢˜ï¼ŒAndroidä¹Ÿé‡‡ç”¨äº†å•çº¿ç¨‹UIæ¨¡å‹ã€‚å„ä¸ªç»„ä»¶é€šè¿‡Handlerå°†æ›´æ–°æŒ‡ä»¤å‘é€åˆ°UIçº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼ŒLooperä¸æ–­åœ°ä»é˜Ÿåˆ—ä¸­æ£€ç´¢å¾…å¤„ç†çš„æŒ‡ä»¤ï¼Œç„¶åä¾æ¬¡è¿›è¡Œå¤„ç†ï¼Œç¡®ä¿æŒ‡ä»¤çš„æœ‰åºæ€§ã€‚

æ¯å½“æˆ‘ä»¬å‘èµ·UIæ›´æ–°è¯·æ±‚æ—¶ï¼ŒViewRootImplçš„ `checkThread()` æ–¹æ³•ä¼šæ£€æŸ¥åˆ›å»ºViewçš„çº¿ç¨‹ä¸è¯·æ±‚æ›´æ–°çš„çº¿ç¨‹æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœä¸¤è€…ä¸ä¸€è‡´ï¼Œå°†ä¼šæŠ›å‡ºä»¥ä¸‹å¼‚å¸¸ï¼š

```text
05:52:14.065 25317 25370 E AndroidRuntime: Process: net.bi4vmr.study.system.concurrent.handler, PID: 25317
05:52:14.065 25317 25370 E AndroidRuntime: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
05:52:14.065 25317 25370 E AndroidRuntime:        at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:9526)
05:52:14.065 25317 25370 E AndroidRuntime:        at android.view.ViewRootImpl.invalidateChildInParent(ViewRootImpl.java:1931)
05:52:14.065 25317 25370 E AndroidRuntime:        at android.view.ViewGroup.invalidateChild(ViewGroup.java:6147)
05:52:14.065 25317 25370 E AndroidRuntime:        at android.view.View.invalidateInternal(View.java:18857)
05:52:14.065 25317 25370 E AndroidRuntime:        at android.view.View.invalidate(View.java:18817)
05:52:14.065 25317 25370 E AndroidRuntime:        at android.view.View.invalidate(View.java:18799)
05:52:14.065 25317 25370 E AndroidRuntime:        at net.bi4vmr.study.base.TestUIBase$onCreate$1.invoke(TestUIBaseKT.kt:62)
05:52:14.065 25317 25370 E AndroidRuntime:        at kotlin.concurrent.ThreadsKt$thread$thread$1.run(Thread.kt:30)
```

åº”ç”¨ç¨‹åºçš„ä¸»çº¿ç¨‹é€šå¸¸å°±æ˜¯åˆ›å»ºViewçš„çº¿ç¨‹ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨ä¸»çº¿ç¨‹ä¸­è¿›è¡ŒUIæ›´æ–°æ“ä½œï¼›å¯¹äºè€—æ—¶è¾ƒé•¿çš„ä»»åŠ¡ï¼ˆä¾‹å¦‚ï¼šä¸‹è½½å›¾ç‰‡ã€ç»Ÿè®¡æ•°æ®ç­‰ï¼‰ï¼Œæˆ‘ä»¬åº”å½“å¼€å¯å­çº¿ç¨‹è¿›è¡Œå¤„ç†ï¼Œå¹¶å°†ç»“æœé€šè¿‡Handlerä»å­çº¿ç¨‹å‘é€è‡³ä¸»çº¿ç¨‹ï¼Œæ‰èƒ½æˆåŠŸåœ°æ›´æ–°UIå¹¶é¿å…å‰æ–‡çš„å¼‚å¸¸ã€‚

æœ¬ç« çš„ç¤ºä¾‹å·¥ç¨‹è¯¦è§ä»¥ä¸‹é“¾æ¥ï¼š

- [ğŸ”— ç¤ºä¾‹å·¥ç¨‹ï¼šHandler](https://github.com/BI4VMR/Study-Android/tree/master/M04_System/C06_Concurrent/S02_Handler)

# åŸºæœ¬åº”ç”¨
ä¸‹æ–‡ç¤ºä¾‹å±•ç¤ºäº†Handlerçš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ã€‚

ğŸ”´ ç¤ºä¾‹ä¸€ï¼šHandlerçš„åŸºæœ¬åº”ç”¨ã€‚

åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡Handlerå¤„ç†è‡ªå®šä¹‰æ¶ˆæ¯ï¼Œå®ç°æ›´æ–°UIçš„åŠŸèƒ½ã€‚

ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬åœ¨æµ‹è¯•Activityä¸­å£°æ˜ä¸€ä¸ªHandlerå¯¹è±¡ `mHandler` ï¼Œå¹¶é‡å†™å®ƒçš„ `handleMessage()` æ–¹æ³•ï¼Œå®ç°è‡ªå®šä¹‰æ¶ˆæ¯å¤„ç†é€»è¾‘ã€‚

"TestUIBase.java":

```java
// å£°æ˜å¸¸é‡è¡¨ç¤ºä¸åŒçš„æ¶ˆæ¯
private final int MSG_TEST_01 = 0x01;
private final int MSG_TEST_02 = 0x02;

// åˆ›å»ºHandlerå¯¹è±¡ï¼Œä½¿ç”¨ä¸»çº¿ç¨‹çš„äº‹ä»¶å¾ªç¯ã€‚
private final Handler mHandler = new Handler(Looper.getMainLooper()) {

    // å›è°ƒæ–¹æ³•ï¼šå½“æœ‰æ–°æ¶ˆæ¯éœ€è¦å¤„ç†æ—¶è¢«è§¦å‘
    @Override
    public void handleMessage(@NonNull Message msg) {
        int code = msg.what;
        switch (code) {
            case MSG_TEST_01:
                Log.d(TAG, "HandleMessage 1.");
                // åœ¨æ­¤å¤„ç¼–å†™æ”¶åˆ°1å·æ¶ˆæ¯åéœ€è¦æ‰§è¡Œçš„é€»è¾‘...
                tvLog.append("HandleMessage 1.");
                break;
            case MSG_TEST_02:
                Log.d(TAG, "HandleMessage 2. Arg1:[" + msg.arg1 + "] Arg2:[" + msg.arg2 + "]");
                // åœ¨æ­¤å¤„ç¼–å†™æ”¶åˆ°2å·æ¶ˆæ¯åéœ€è¦æ‰§è¡Œçš„é€»è¾‘...
                tvLog.append("HandleMessage 2. Arg1:[" + msg.arg1 + "] Arg2:[" + msg.arg2 + "]");
        }
    }
};
```

åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼ŒHandlerçš„æ„é€ æ–¹æ³•å”¯ä¸€å‚æ•°ä¸º `Looper.getMainLooper()` ï¼Œè¡¨ç¤ºå°†è¯¥Handlerå…³è”åˆ°ä¸»çº¿ç¨‹ã€‚

`handleMessage(Message msg)` æ˜¯ä¸€ä¸ªå›è°ƒæ–¹æ³•ï¼Œå½“Looperå¼€å§‹å¤„ç†MessageQueueé¦–éƒ¨çš„Messageæ—¶ï¼Œè¯¥æ–¹æ³•å°†è¢«è§¦å‘ï¼Œå”¯ä¸€å‚æ•° `msg` å³æ­£è¢«å¤„ç†çš„Messageã€‚

Handleré€šè¿‡æ•°å­—ç¼–å·åŒºåˆ†ä¸åŒçš„Messageï¼Œæˆ‘ä»¬é€šå¸¸å°†åºå·å®šä¹‰ä¸ºå¸¸é‡æˆ–æšä¸¾ï¼Œä»¥ä¾¿è§„èŒƒåœ°å¼•ç”¨ï¼Œæ˜ç¡®æ¶ˆæ¯çš„ç”¨é€”ã€‚

ç”±äºæ­¤å¤„çš„Handlerä¸ä¸»çº¿ç¨‹ç›¸å…³è”ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ `handleMessage()` æ–¹æ³•ä¸­è¿›è¡Œæ›´æ–°UIçš„æ“ä½œã€‚æ­¤å¤„çš„ `tvLog` æ˜¯ä¸€ä¸ªTextViewï¼ŒHandleræ”¶åˆ°æ¶ˆæ¯åä¼šå°†æ–‡æœ¬æ›´æ–°åˆ°TextViewä¸­ã€‚

ä¸Šè¿°å†…å®¹ä¹Ÿå¯ä»¥ä½¿ç”¨Kotlinè¯­è¨€ç¼–å†™ï¼š

"TestUIBase.kt":

```kotlin
companion object {
    // å£°æ˜å¸¸é‡è¡¨ç¤ºä¸åŒçš„æ¶ˆæ¯
    private const val MSG_TEST_01: Int = 0x01
    private const val MSG_TEST_02: Int = 0x02
}

// åˆ›å»ºHandlerå¯¹è±¡ï¼Œä½¿ç”¨ä¸»çº¿ç¨‹çš„äº‹ä»¶å¾ªç¯ã€‚
private val mHandler: Handler = object : Handler(Looper.getMainLooper()) {

    // å›è°ƒæ–¹æ³•ï¼šå½“æœ‰æ–°æ¶ˆæ¯éœ€è¦å¤„ç†æ—¶è¢«è§¦å‘
    override fun handleMessage(msg: Message) {
        // æ ¹æ®"what"å±æ€§åŒºåˆ†æ¶ˆæ¯
        val code: Int = msg.what
        when (code) {
            0x01 -> {
                Log.d(TAG, "HandleMessage 1.")
                // åœ¨æ­¤å¤„ç¼–å†™æ”¶åˆ°1å·æ¶ˆæ¯åéœ€è¦æ‰§è¡Œçš„é€»è¾‘...
                tvLog.append("HandleMessage 1.")
            }
            0x02 -> {
                Log.d(TAG, "HandleMessage 2. Arg1:[${msg.arg1}] Arg2:[${msg.arg2}]")
                // åœ¨æ­¤å¤„ç¼–å†™æ”¶åˆ°1å·æ¶ˆæ¯åéœ€è¦æ‰§è¡Œçš„é€»è¾‘...
                tvLog.append("HandleMessage 2. Arg1:[${msg.arg1}] Arg2:[${msg.arg2}]")
            }
        }
    }
}
```

ç¬¬äºŒæ­¥ï¼Œæˆ‘ä»¬é€šè¿‡ `mHandler` å‘MessageQueueå‘é€ä¸€æ¡â€œæ¶ˆæ¯1â€ã€‚

"TestUIBase.java":

```java
Log.i(TAG, "--- å‘é˜Ÿåˆ—ä¸­å‘é€æ¶ˆæ¯1 ---");

mHandler.sendEmptyMessage(MSG_TEST_01);
```

Handlerå¯¹è±¡çš„ `sendEmptyMessage(int what)` æ–¹æ³•ç”¨äºå‘MessageQueueå‘é€å†…å®¹ä¸ºç©ºçš„Messageï¼Œå”¯ä¸€å‚æ•° `what` æŒ‡æ˜äº†Messageçš„æ•°å­—ç¼–å·ï¼Œè¿™ç§Messageä¸åŒ…å«ä»»ä½•å‚æ•°ï¼Œä»…ç”¨äºè§¦å‘Handlerå¯¹è±¡çš„ `handleMessage()` å›è°ƒæ–¹æ³•ã€‚

ä¸Šè¿°å†…å®¹ä¹Ÿå¯ä»¥ä½¿ç”¨Kotlinè¯­è¨€ç¼–å†™ï¼š

"TestUIBase.kt":

```kotlin
Log.i(TAG, "--- å‘é˜Ÿåˆ—ä¸­å‘é€æ¶ˆæ¯1 ---")

mHandler.sendEmptyMessage(MSG_TEST_01)
```

æ­¤æ—¶è¿è¡Œç¤ºä¾‹ç¨‹åºï¼Œå¹¶æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºä¿¡æ¯ä¸ç•Œé¢å¤–è§‚ï¼š

```text
20:58:42.638 18979 18979 I TestUIBase: --- å‘é˜Ÿåˆ—ä¸­å‘é€æ¶ˆæ¯1 ---
20:58:42.676 18979 18979 D TestUIBase: HandleMessage 1.
```

ğŸŸ  ç¤ºä¾‹äºŒï¼šå‘é€æºå¸¦é¢å¤–æ•°æ®çš„æ¶ˆæ¯ã€‚

åœ¨å‰æ–‡â€œç¤ºä¾‹ä¸€â€ä¸­ï¼ŒHandlerå¯¹è±¡å·²ç»å®ç°äº†å¤„ç†â€œæ¶ˆæ¯2â€çš„é€»è¾‘ï¼Œèƒ½å¤Ÿå°†æ¶ˆæ¯æºå¸¦çš„ä¸¤ä¸ªå‚æ•°è¾“å‡ºåˆ°æ§åˆ¶å°ä¸ç•Œé¢ä¸Šã€‚

åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡Handlerå‘é€â€œæ¶ˆæ¯2â€ï¼Œå¹¶è®¾ç½®ä¸¤ä¸ªå‚æ•°ã€‚

"TestUIBase.java":

```java
Log.i(TAG, "--- å‘é˜Ÿåˆ—ä¸­å‘é€æ¶ˆæ¯2 ---")

// ä»ç³»ç»Ÿç”³è¯·ä¸€ä¸ªMessageå¯¹è±¡
Message msg = Message.obtain();
msg.what = MSG_TEST_01;
// è®¾ç½®å‚æ•°
msg.arg1 = 114514;
msg.arg2 = 1919810;
// å‘é€æ¶ˆæ¯
mHandler.sendMessage(msg);
```

åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨Messageçš„é™æ€æ–¹æ³• `obtain()` è·å–Messageå¯¹è±¡ï¼Œç„¶åè®¾ç½®å‚æ•°å¹¶é€šè¿‡Handlerçš„ `sendMessage()` æ–¹æ³•å‘é€Messageã€‚

Messageå¯¹è±¡è¢«ä½¿ç”¨å®Œæ¯•åï¼Œç³»ç»Ÿä¸ä¼šç«‹åˆ»å°†å…¶å›æ”¶ï¼Œè€Œæ˜¯æ”¾ç½®åœ¨ç¼“å­˜æ± ä¸­ï¼Œç¼“å­˜æ± çš„å®¹é‡ä¸Šé™ä¸º50ï¼›å½“æˆ‘ä»¬è°ƒç”¨ `obtain()` æ–¹æ³•æ—¶ï¼Œç³»ç»Ÿä¼šä»ç¼“å­˜æ± ä¸­å–å‡ºå·²ç¼“å­˜çš„Messageå¯¹è±¡ã€‚å› æ­¤æˆ‘ä»¬æ¨èä½¿ç”¨ `obtain()` æ–¹æ³•è·å–Messageå¯¹è±¡ï¼Œè€Œä¸æ˜¯æ‰‹åŠ¨åˆ›å»ºMessageå¯¹è±¡ã€‚

Messageå¯¹è±¡çš„ `arg1` ä¸ `arg2` å±æ€§æ˜¯ä¸¤ä¸ª"int"å‹å˜é‡ï¼Œå®ƒä»¬å¯ä»¥æºå¸¦ä¸€äº›ç®€å•çš„å‚æ•°ï¼Œä»¥ä¾¿ `handleMessage()` å›è°ƒæ–¹æ³•å¤„ç†è¿™ç§Messageæ—¶æ ¹æ®å‚æ•°ä½œå‡ºå¯¹åº”çš„æ“ä½œã€‚

ä¸Šè¿°å†…å®¹ä¹Ÿå¯ä»¥ä½¿ç”¨Kotlinè¯­è¨€ç¼–å†™ï¼š

"TestUIBase.kt":

```kotlin
Log.i(TAG, "--- å‘é˜Ÿåˆ—ä¸­å‘é€æ¶ˆæ¯2 ---");

// ä»ç³»ç»Ÿç”³è¯·ä¸€ä¸ªMessageå¯¹è±¡
val msg: Message = Message.obtain()
msg.what = MSG_TEST_02
// è®¾ç½®å‚æ•°
msg.arg1 = 114514
msg.arg2 = 1919810
// å‘é€æ¶ˆæ¯
mHandler.sendMessage(msg)
```

æ­¤æ—¶è¿è¡Œç¤ºä¾‹ç¨‹åºï¼Œå¹¶æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºä¿¡æ¯ä¸ç•Œé¢å¤–è§‚ï¼š

```text
20:55:06.048 18979 18979 I TestUIBase: --- å‘é˜Ÿåˆ—ä¸­å‘é€æ¶ˆæ¯2 ---
20:55:06.105 18979 18979 D TestUIBase: HandleMessage 2. Arg1:[114514] Arg2:[1919810]
```

é™¤äº† `arg1` ä¸ `arg2` å±æ€§ä¹‹å¤–ï¼ŒMessageè¿˜æä¾›äº†ä¸€äº›å…¶ä»–ç±»å‹çš„å®¹å™¨ï¼Œå®ƒä»¬æ‰€éœ€çš„èµ„æºä¾æ¬¡é€’å¢ï¼š

- `Object obj` å±æ€§ï¼šè¯¥å±æ€§å¯ä»¥æºå¸¦å•ä¸ªObjectæ•°æ®ï¼›å®ƒçš„è®¿é—®ä¿®é¥°ç¬¦ä¸º"public"ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è¯»å†™ã€‚
- `Bundle data` å±æ€§ï¼šè¯¥å±æ€§å¯ä»¥æºå¸¦ä¸€ç»„Bundleæ•°æ®ï¼›æˆ‘ä»¬éœ€è¦ä½¿ç”¨ `setData()` å’Œ `getData()` æ–¹æ³•è¯»å†™ã€‚

# å‘é€å»¶æ—¶æ¶ˆæ¯
æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›å‘é€Messageåç»è¿‡ä¸€æ®µæ—¶é—´å†è¢«å¤„ç†ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨å»¶æ—¶æœºåˆ¶ã€‚

Messageçš„ `when` å±æ€§æŒ‡å®šäº†æœŸæœ›è¢«å¤„ç†çš„æ—¶åˆ»ï¼Œå½“æˆ‘ä»¬å‘MessageQueueä¸­å‘é€Messageæ—¶ï¼Œ `when` å±æ€§çš„å€¼ä¸ºâ€œå¼€æœºåˆ°å½“å‰æ—¶åˆ»çš„æ—¶é•¿ + å»¶æ—¶æ—¶é•¿â€ï¼›MessageQueueä¼šæ ¹æ®Messageçš„ `when` å±æ€§ï¼Œä»å°åˆ°å¤§ä¾æ¬¡æ’åˆ—æ‰€æœ‰æ¶ˆæ¯ã€‚

ğŸŸ¡ ç¤ºä¾‹ä¸‰ï¼šå‘é€å»¶æ—¶æ¶ˆæ¯ã€‚

åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡Handlerå‘é€ä¸€äº›éœ€è¦è¢«å»¶æ—¶å¤„ç†çš„æ¶ˆæ¯ã€‚

"TestUIBase.java":

```java
Log.i(TAG, "--- å‘é˜Ÿåˆ—ä¸­å‘é€æ¶ˆæ¯ï¼ˆå»¶æ—¶æ‰§è¡Œï¼‰ ---");

// å‘é˜Ÿåˆ—å‘é€æ¶ˆæ¯1ï¼Œå»¶æ—¶4ç§’åæ‰§è¡Œã€‚
mHandler.sendEmptyMessageDelayed(MSG_TEST_01, 4000L);

// å‘é˜Ÿåˆ—å‘é€æ¶ˆæ¯2ï¼Œå»¶æ—¶8ç§’åæ‰§è¡Œã€‚
Message msg = Message.obtain();
msg.what = MSG_TEST_02;
msg.arg1 = -100;
mHandler.sendMessageDelayed(msg, 8000L);
```

åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨Handlerçš„ `sendMessageDelayed()` å’Œ `sendEmptyMessageDelayed()` æ–¹æ³•å‘æ¶ˆæ¯é˜Ÿåˆ—ä¸­å‘é€äº†ä¸¤æ¡æ¶ˆæ¯ï¼Œå¹¶é€šè¿‡ç¬¬äºŒå‚æ•°è®¾ç½®å»¶æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’ã€‚

ä¸Šè¿°å†…å®¹ä¹Ÿå¯ä»¥ä½¿ç”¨Kotlinè¯­è¨€ç¼–å†™ï¼š

"TestUIBase.kt":

```kotlin
Log.i(TAG, "--- å‘é˜Ÿåˆ—ä¸­å‘é€æ¶ˆæ¯ï¼ˆå»¶æ—¶æ‰§è¡Œï¼‰ ---")

// å‘é˜Ÿåˆ—å‘é€æ¶ˆæ¯1ï¼Œå»¶æ—¶4ç§’åæ‰§è¡Œã€‚
mHandler.sendEmptyMessageDelayed(MSG_TEST_01, 4000L)

// å‘é˜Ÿåˆ—å‘é€æ¶ˆæ¯2ï¼Œå»¶æ—¶8ç§’åæ‰§è¡Œã€‚
val msg: Message = Message.obtain()
msg.what = MSG_TEST_02
msg.arg1 = -100
mHandler.sendMessageDelayed(msg, 8000L)
```

æ­¤æ—¶è¿è¡Œç¤ºä¾‹ç¨‹åºï¼Œå¹¶æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºä¿¡æ¯ä¸ç•Œé¢å¤–è§‚ï¼š

```text
23:07:09.125 11167 11167 I TestUIBase: --- å‘é˜Ÿåˆ—ä¸­å‘é€æ¶ˆæ¯ï¼ˆå»¶æ—¶æ‰§è¡Œï¼‰ ---
23:07:13.193 11167 11167 D TestUIBase: HandleMessage 1.
23:07:17.192 11167 11167 D TestUIBase: HandleMessage 2. Arg1:[-100] Arg2:[0]
```

æ ¹æ®ä¸Šè¿°è¾“å‡ºå†…å®¹å¯çŸ¥ï¼š

åœ¨æ¶ˆæ¯è¢«å‘é€åçš„ç¬¬4ç§’ï¼Œâ€œæ¶ˆæ¯1â€è¢«å¤„ç†äº†ï¼›åœ¨æ¶ˆæ¯è¢«å‘é€åçš„ç¬¬8ç§’ï¼Œâ€œæ¶ˆæ¯2â€è¢«å¤„ç†äº†ã€‚

# æäº¤å›è°ƒæ–¹æ³•
åœ¨å‰æ–‡ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡é‡å†™Handlerçš„ `handleMessage()` æ–¹æ³•å®šä¹‰æ¶ˆæ¯ä»¥åŠå¯¹åº”çš„æ“ä½œï¼Œè¿™ç§æ–¹å¼é€‚ç”¨äºå°è£…è¢«å¤šå¤„è°ƒç”¨çš„ã€è¾ƒä¸ºå¤æ‚çš„ä»£ç è¯­å¥ï¼›æœ‰æ—¶æˆ‘ä»¬åªéœ€é€šè¿‡Handlerç»‘å®šçš„çº¿ç¨‹å•æ¬¡è°ƒç”¨æŸäº›ä»£ç è¯­å¥ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥å‘MessageQueueæäº¤å›è°ƒæ–¹æ³•ä»¥ç®€åŒ–æ“ä½œã€‚

æäº¤å›è°ƒæ–¹æ³•è¿™ä¸€æ“ä½œå®é™…ä¸Šä¹Ÿæ˜¯å‘MessageQueueä¸­å‘é€Messageï¼ŒLooperå¤„ç†è¿™ç§Messageæ—¶ä¸ä¼šè§¦å‘Handlerå¯¹è±¡çš„ `handleMessage()` æ–¹æ³•ï¼Œè€Œæ˜¯ç›´æ¥æ‰§è¡ŒRunnableçš„ `run()` æ–¹æ³•ã€‚

ğŸŸ¢ ç¤ºä¾‹å››ï¼šæäº¤å›è°ƒæ–¹æ³•ã€‚

åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡Handleræäº¤ä¸€äº›å›è°ƒæ–¹æ³•ã€‚

"TestUIBase.java":

```java
Log.i(TAG, "--- å‘é˜Ÿåˆ—ä¸­æäº¤å›è°ƒæ–¹æ³• ---");

// å‘é˜Ÿåˆ—æäº¤å›è°ƒæ–¹æ³•ï¼Œç«‹åˆ»æ‰§è¡Œã€‚
mHandler.post(new Runnable() {

    @Override
    public void run() {
        Log.i(TAG, "HandleCallback A");
    }
});

// å‘é˜Ÿåˆ—æäº¤å›è°ƒæ–¹æ³•ï¼Œå»¶æ—¶4ç§’åæ‰§è¡Œã€‚
mHandler.postDelayed(() -> {
    Log.i(TAG, "HandleCallback B");
}, 4000L);
```

åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨Handlerå¯¹è±¡çš„ `post(Runnable r)` æ–¹æ³•æäº¤éœ€è¦ç«‹åˆ»æ‰§è¡Œçš„å›è°ƒæ–¹æ³•ï¼Œå”¯ä¸€å‚æ•° `r` æ˜¯Runnableæ¥å£çš„å®ç°ç±»ï¼Œæˆ‘ä»¬åº”å½“å°†å¾…æ‰§è¡Œçš„è¯­å¥æ”¾ç½®åœ¨ `run()` æ–¹æ³•å†…ã€‚

Handlerå¯¹è±¡çš„ `postDelayed(Runnable r, long delayMillis)` æ–¹æ³•ç”¨äºå‘æ¶ˆæ¯é˜Ÿåˆ—ä¸­æäº¤éœ€è¦è¢«å»¶æ—¶æ‰§è¡Œçš„å›è°ƒæ–¹æ³•ï¼Œç¬¬äºŒå‚æ•° `delayMillis` æŒ‡å®šäº†å»¶æ—¶æ—¶é•¿ã€‚

ä¸Šè¿°å†…å®¹ä¹Ÿå¯ä»¥ä½¿ç”¨Kotlinè¯­è¨€ç¼–å†™ï¼š

"TestUIBase.kt":

```kotlin
Log.i(TAG, "--- å‘é˜Ÿåˆ—ä¸­æäº¤å›è°ƒæ–¹æ³• ---")

// å‘é˜Ÿåˆ—æäº¤å›è°ƒæ–¹æ³•ï¼Œç«‹åˆ»æ‰§è¡Œã€‚
mHandler.post(object : Runnable {

    override fun run() {
        Log.i(TAG, "HandleCallback A")
    }
})

// å‘é˜Ÿåˆ—æäº¤å›è°ƒæ–¹æ³•ï¼Œå»¶æ—¶4ç§’åæ‰§è¡Œã€‚
mHandler.postDelayed({
    Log.i(TAG, "HandleCallback B")
}, 4000L)
```

æ­¤æ—¶è¿è¡Œç¤ºä¾‹ç¨‹åºï¼Œå¹¶æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºä¿¡æ¯ä¸ç•Œé¢å¤–è§‚ï¼š

```text
22:13:23.115  2956  2956 I TestUIBase: --- å‘é˜Ÿåˆ—ä¸­æäº¤å›è°ƒæ–¹æ³• ---
22:13:23.208  2956  2956 I TestUIBase: HandleCallback A
22:13:27.185  2956  2956 I TestUIBase: HandleCallback B
```

æ ¹æ®ä¸Šè¿°è¾“å‡ºå†…å®¹å¯çŸ¥ï¼š

åœ¨ä¸¤ä¸ªå›è°ƒæ–¹æ³•è¢«æäº¤åï¼Œå›è°ƒæ–¹æ³•Aç«‹åˆ»è¢«æ‰§è¡Œï¼›ç»è¿‡4ç§’åï¼Œå›è°ƒæ–¹æ³•Bè¢«æ‰§è¡Œã€‚

# ç§»é™¤é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯
åœ¨ä»¥ä¸‹åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç§»é™¤MessageQueueä¸­å°šæœªè¢«å¤„ç†çš„Messageï¼š

- ä¸šåŠ¡é€»è¾‘æ‰€éœ€ï¼šMessageQueueä¸­çš„Messageç”±ç”¨æˆ·é¢„çº¦æŸäº›ä¸šåŠ¡è€Œå‘èµ·ï¼Œä¸€æ®µæ—¶é—´åç”¨æˆ·å¸Œæœ›å–æ¶ˆé¢„çº¦è¿™äº›ä¸šåŠ¡ã€‚åœ¨æ­¤åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç§»é™¤ä¸šåŠ¡å¯¹åº”çš„Messageï¼Œå®ç°å–æ¶ˆé¢„çº¦åŠŸèƒ½ã€‚
- é¿å…å†…å­˜æ³„æ¼ï¼šMessageQueueä¸­éƒ¨åˆ†éœ€è¦å»¶æ—¶æ‰§è¡Œçš„MessageæŒæœ‰äº†Activityæˆ–Viewçš„å¼•ç”¨ï¼Œå½“Activityè¢«å…³é—­ä¹‹åï¼ŒMessageä»æœªè¢«å¤„ç†ï¼Œæ­¤æ—¶Activityå°±æ— æ³•è¢«ç³»ç»Ÿå›æ”¶ï¼Œé€ æˆäº†æš‚æ—¶çš„å†…å­˜æ³„æ¼ï¼›ç›´åˆ°Messageå»¶æ—¶ç»“æŸå¹¶è¢«å¤„ç†å®Œæ¯•æ—¶ï¼ŒActivityçš„å¼•ç”¨æ‰ä¼šè¢«é‡Šæ”¾ã€‚åœ¨æ­¤åœºæ™¯ä¸­ï¼Œå½“Activityè¢«å…³é—­æ—¶ï¼Œæˆ‘ä»¬åº”å½“åŒæ­¥æ¸…ç©ºMessageQueueã€‚

> ğŸš© æç¤º
>
> æˆ‘ä»¬åªèƒ½ç§»é™¤MessageQueueä¸­å°šæœªè¢«å¤„ç†çš„Messageï¼Œå¦‚æœMessageæ­£åœ¨è¢«Looperå¤„ç†ï¼Œç§»é™¤æŒ‡ä»¤å¯¹å®ƒä»¬æ˜¯æ— æ•ˆçš„ã€‚

ä¸‹æ–‡ç¤ºä¾‹å±•ç¤ºäº†ç§»é™¤Messageçš„æ–¹æ³•ã€‚

ğŸ”µ ç¤ºä¾‹äº”ï¼šç§»é™¤æŒ‡å®šçš„æ¶ˆæ¯ã€‚

åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡Handlerå‘é€ä¸€äº›éœ€è¦å»¶æ—¶å¤„ç†çš„æ¶ˆæ¯ï¼Œç„¶åå†ç§»é™¤å…¶ä¸­çš„éƒ¨åˆ†æ¶ˆæ¯ã€‚

"TestUIBase.java":

```java
// å‘é˜Ÿåˆ—å‘é€æ¶ˆæ¯
Log.i(TAG, "--- å‘é˜Ÿåˆ—ä¸­å‘é€æ¶ˆæ¯ï¼ˆå»¶æ—¶æ‰§è¡Œï¼‰ ---");
mHandler.sendEmptyMessageDelayed(MSG_TEST_01, 4000L);
mHandler.sendEmptyMessageDelayed(MSG_TEST_02, 8000L);

// ç§»é™¤æ‰€æœ‰ç¼–å·ä¸º1çš„æ¶ˆæ¯
Log.i(TAG, "--- ç§»é™¤é˜Ÿåˆ—ä¸­å°šæœªæ‰§è¡Œçš„æ¶ˆæ¯1 ---");
mHandler.removeMessages(MSG_TEST_01);
```

Handlerå¯¹è±¡çš„ `removeMessages(int what)` æ–¹æ³•ç”¨äºç§»é™¤æŒ‡å®šçš„æ¶ˆæ¯ï¼Œæ­¤å¤„æˆ‘ä»¬ç§»é™¤äº†æ‰€æœ‰çš„â€œæ¶ˆæ¯1â€ã€‚

ä¸Šè¿°å†…å®¹ä¹Ÿå¯ä»¥ä½¿ç”¨Kotlinè¯­è¨€ç¼–å†™ï¼š

"TestUIBase.kt":

```kotlin
// å‘é˜Ÿåˆ—å‘é€æ¶ˆæ¯
Log.i(TAG, "--- å‘é˜Ÿåˆ—ä¸­å‘é€æ¶ˆæ¯ï¼ˆå»¶æ—¶æ‰§è¡Œï¼‰ ---")
mHandler.sendEmptyMessageDelayed(MSG_TEST_01, 4000L)
mHandler.sendEmptyMessageDelayed(MSG_TEST_02, 8000L)

// ç§»é™¤æ‰€æœ‰ç¼–å·ä¸º1çš„æ¶ˆæ¯
Log.i(TAG, "--- ç§»é™¤é˜Ÿåˆ—ä¸­å°šæœªæ‰§è¡Œçš„æ¶ˆæ¯1 ---")
mHandler.removeMessages(MSG_TEST_01)
```

æ­¤æ—¶è¿è¡Œç¤ºä¾‹ç¨‹åºï¼Œå¹¶æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºä¿¡æ¯ä¸ç•Œé¢å¤–è§‚ï¼š

```text
00:02:33.448 11167 11167 I TestUIBase: --- å‘é˜Ÿåˆ—ä¸­å‘é€æ¶ˆæ¯ï¼ˆå»¶æ—¶æ‰§è¡Œï¼‰ ---
00:02:35.377 11167 11167 I TestUIBase: --- ç§»é™¤é˜Ÿåˆ—ä¸­å°šæœªæ‰§è¡Œçš„æ¶ˆæ¯1 ---
00:02:37.462 11167 11167 D TestUIBase: HandleMessage 2. Arg1:[0] Arg2:[0]
```

æ ¹æ®ä¸Šè¿°è¾“å‡ºå†…å®¹å¯çŸ¥ï¼š

å½“æˆ‘ä»¬è°ƒç”¨ `removeMessages(MSG_TEST_01)` æ–¹æ³•åï¼Œé˜Ÿåˆ—ä¸­çš„â€œæ¶ˆæ¯1â€è¢«æ¸…é™¤äº†ï¼ŒHandlerå¯¹è±¡çš„ `handleMessage()` å›è°ƒæ–¹æ³•æ²¡æœ‰è¢«è§¦å‘ï¼›é˜Ÿåˆ—ä¸­çš„â€œæ¶ˆæ¯2â€åˆ™ä¸å—å½±å“ï¼Œé¢„å®šæ—¶åˆ»åˆ°è¾¾åè¢«å¤„ç†å¹¶è¾“å‡ºäº†æ—¥å¿—ä¿¡æ¯ã€‚

Handlerè¿˜æä¾›äº†ä¸€äº›ç§»é™¤MessageQueueä¸­å›è°ƒæ–¹æ³•çš„æ–¹æ³•ï¼š

- `removeCallbacks(Runnable r)` ï¼šç§»é™¤Runnableå¯¹è±¡æ‰€å…³è”çš„Messageã€‚
- `removeCallbacks(Runnable r, Object token)` ï¼šç§»é™¤Runnableå¯¹è±¡å’Œ `token` æ‰€å…³è”çš„Messageã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Handlerçš„ `postDelayed(Runnable r, Object token, long delayMillis)` æ–¹æ³•æäº¤å›è°ƒæ–¹æ³•ï¼Œå¹¶é€šè¿‡ `token` æ ‡è®°è¯¥Messageï¼›å½“æˆ‘ä»¬éœ€è¦ç§»é™¤Messageæ—¶ï¼Œå†ä¼ å…¥ `token` ç­›é€‰æŒ‡å®šçš„Messageã€‚
- `removeCallbacksAndMessages(Object token)` ï¼šç§»é™¤ `token` æ‰€å…³è”çš„Messageï¼ŒåŒ…æ‹¬æ™®é€šçš„Messageå’Œå›è°ƒæ–¹æ³•çš„Messageã€‚å¦‚æœ `token` ä¸ºç©ºå€¼ï¼Œå°†ä¼šæ¸…ç©ºMessageQueueï¼Œæˆ‘ä»¬é€šå¸¸ä¼šåœ¨ç•Œé¢é€€å‡ºæ—¶è°ƒç”¨è¯¥æ–¹æ³•ä»¥é˜²æ­¢å†…å­˜æ³„æ¼ã€‚

# æ›´æ–°UIçš„å¿«æ·æ–¹æ³•
å½“æˆ‘ä»¬éœ€è¦æ›´æ–°UIæ—¶ï¼Œé™¤äº†åˆ›å»ºç»‘å®šä¸»çº¿ç¨‹çš„Handlerå¯¹è±¡å¹¶æäº¤å›è°ƒæ–¹æ³•ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å¿«æ·æ–¹æ³•ï¼š

- Activityçš„ `runOnUiThread(Runnable action)` æ–¹æ³•ã€‚
- Viewçš„ `post(Runnable action)` æ–¹æ³•ã€‚
- Viewçš„ `post(Runnable action, long delayMillis)` æ–¹æ³•ã€‚

ä¸Šè¿°æ–¹æ³•å‡ä¸ºSDKå¯¹UIçº¿ç¨‹Handlerçš„å°è£…ï¼Œç¬¬ä¸€å‚æ•° `action` çš„ `run()` æ–¹æ³•å³éœ€è¦åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œçš„æ›´æ–°æ“ä½œï¼›å…¶ä¸­Viewçš„ä¸¤ä¸ªæ–¹æ³•èƒ½å¤Ÿç¡®ä¿æ›´æ–°æ“ä½œåœ¨å¸ƒå±€æµ‹é‡ã€ç»˜åˆ¶å®Œæˆä¹‹åå†è¢«æ‰§è¡Œï¼Œå› æ­¤æˆ‘ä»¬èƒ½å¤Ÿåœ¨æ­¤å¤„è·å–åˆ°Viewçš„å®½é«˜ç­‰å±æ€§ã€‚

# åˆ›å»ºå­çº¿ç¨‹Handler
æœ‰æ—¶æˆ‘ä»¬éœ€è¦é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—å¤„ç†ä¸€ç³»åˆ—äº‹ä»¶åºåˆ—ï¼Œè¿™äº›äº‹ä»¶éƒ½ä¸UIæ— å…³ï¼Œæ­¤æ—¶æˆ‘ä»¬ä¾¿å¯ä»¥ä½¿ç”¨å­çº¿ç¨‹çš„Handlerã€‚

ğŸ”µ ç¤ºä¾‹å…­ï¼šåˆ›å»ºå¹¶ä½¿ç”¨å­çº¿ç¨‹çš„Handlerã€‚

åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºå­çº¿ç¨‹çš„Handlerå¯¹è±¡ï¼Œå¹¶å‘å…¶ä¸­å‘é€ä¸€äº›æ¶ˆæ¯ã€‚

"TestUIBase.java":

```java
// å­çº¿ç¨‹çš„Handler
private Handler mSubHandler = null;

{
    // åœ¨å­çº¿ç¨‹ä¸­åˆå§‹åŒ–Handler
    new Thread(() -> {
        // åˆ›å»ºæœ¬çº¿ç¨‹çš„Looperå¯¹è±¡
        Looper.prepare();
        // ä½¿ç”¨å½“å‰çº¿ç¨‹çš„Looperåˆ›å»ºHandlerå¯¹è±¡
        Looper looper = Looper.myLooper();
        if (looper != null) {
            mSubHandler = new Handler(looper);
        }
        // å¼€å§‹äº‹ä»¶å¾ªç¯
        Looper.loop();
    }).start();
}


// å‘é˜Ÿåˆ—æäº¤å›è°ƒæ–¹æ³•ï¼Œç«‹åˆ»æ‰§è¡Œã€‚
mSubHandler.post(() -> Log.i(TAG, "HandleCallback A"));
// å‘é˜Ÿåˆ—æäº¤å›è°ƒæ–¹æ³•ï¼Œå»¶æ—¶4ç§’åæ‰§è¡Œã€‚
mSubHandler.postDelayed(() -> Log.i(TAG, "HandleCallback B"), 4000L);
```

åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå­çº¿ç¨‹ï¼Œé¦–å…ˆè°ƒç”¨ `Looper.prepare()` æ–¹æ³•ä¸ºå½“å‰çº¿ç¨‹åˆ›å»ºLooperå¯¹è±¡ï¼›ç„¶ååˆ›å»ºHandlerå¯¹è±¡ï¼Œåœ¨å…¶æ„é€ æ–¹æ³•ä¸­é€šè¿‡ `Looper.myLooper()` æ–¹æ³•è·å–å½“å‰çº¿ç¨‹çš„Looperå¯¹è±¡ï¼›æœ€åè°ƒç”¨ `Looper.loop()` æ–¹æ³•ä½¿Looperå¼€å§‹å¾ªç¯å¤„ç†äº‹ä»¶ã€‚

å½“æˆ‘ä»¬åˆ›å»ºå­çº¿ç¨‹çš„Handleræ—¶ï¼Œå¿…é¡»æŒ‰ç…§é¡ºåºè°ƒç”¨Looperçš„ `prepare()` å’Œ `loop()` æ–¹æ³•ï¼Œå¦åˆ™ä¼šå‡ºç°å¼‚å¸¸ï¼›å½“æˆ‘ä»¬åˆ›å»ºä¸»çº¿ç¨‹çš„Handleræ—¶ï¼Œåˆ™å¯ä»¥ç›´æ¥è°ƒç”¨ `Looper.getMainLooper()` ï¼Œè¿™æ˜¯å› ä¸ºå½“åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼ŒActivityThreadå·²ç»æ‰§è¡Œè¿‡ `prepare()` å’Œ `loop()` æ–¹æ³•äº†ã€‚

ä¸Šè¿°å†…å®¹ä¹Ÿå¯ä»¥ä½¿ç”¨Kotlinè¯­è¨€ç¼–å†™ï¼š

"TestUIBase.kt":

```kotlin
// å­çº¿ç¨‹çš„Handler
private lateinit var mSubHandler: Handler

init {
    // åœ¨å­çº¿ç¨‹ä¸­åˆå§‹åŒ–Handler
    thread {
        // åˆ›å»ºæœ¬çº¿ç¨‹çš„Looperå¯¹è±¡
        Looper.prepare()
        // ä½¿ç”¨å½“å‰çº¿ç¨‹çš„Looperåˆ›å»ºHandlerå¯¹è±¡
        Looper.myLooper()?.let {
            mSubHandler = Handler(it)
        }
        // å¼€å§‹äº‹ä»¶å¾ªç¯
        Looper.loop()
    }
}


// å‘é˜Ÿåˆ—æäº¤å›è°ƒæ–¹æ³•ï¼Œç«‹åˆ»æ‰§è¡Œã€‚
mSubHandler.post { Log.i(TAG, "HandleCallback A") }
// å‘é˜Ÿåˆ—æäº¤å›è°ƒæ–¹æ³•ï¼Œå»¶æ—¶4ç§’åæ‰§è¡Œã€‚
mSubHandler.postDelayed({ Log.i(TAG, "HandleCallback B") }, 4000L)
```

æ­¤æ—¶è¿è¡Œç¤ºä¾‹ç¨‹åºï¼Œå¹¶æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºä¿¡æ¯ä¸ç•Œé¢å¤–è§‚ï¼š

```text
22:23:11.040  6795  6867 I TestUIBase: HandleCallback A
22:23:15.045  6795  6867 I TestUIBase: HandleCallback B
```

ä¸Šè¿°ä»£ç åªæ˜¯ä¸ºäº†æ¼”ç¤ºåœ¨éUIçº¿ç¨‹ä¸­åˆ›å»ºHandlerçš„æ–¹æ³•ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬ä¸å¿…ä¹¦å†™è¯¥é€»è¾‘ï¼Œå¯ä»¥ä½¿ç”¨SDKæä¾›çš„HandlerThreadå·¥å…·ã€‚
