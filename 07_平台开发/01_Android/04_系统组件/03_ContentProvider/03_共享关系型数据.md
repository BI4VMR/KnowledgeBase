# ç®€ä»‹
æˆ‘ä»¬è‡ªè¡Œç¼–å†™çš„åº”ç”¨ç¨‹åºæœ‰æ—¶éœ€è¦ä¸å…¶ä»–ç¨‹åºäº¤æ¢å…³ç³»å‹æ•°æ®ï¼Œæ­¤æ—¶å°±å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ContentProvideræä¾›æ¥å£ã€‚

æœ¬ç« ç¤ºä¾‹ä»£ç è¯¦è§ä»¥ä¸‹é“¾æ¥ï¼š

- [ğŸ”— ç¤ºä¾‹å·¥ç¨‹ï¼šå…±äº«å…³ç³»å‹æ•°æ®](https://github.com/BI4VMR/Study-Android/tree/master/M04_System/C04_ContentProvider/S03_RelationalData)

# åŸºæœ¬åº”ç”¨
## ç¼–å†™æœåŠ¡ç«¯
æˆ‘ä»¬è‡ªå®šä¹‰çš„ContentProvideréœ€è¦ç»§æ‰¿ç³»ç»Ÿæä¾›çš„ContentProviderç±»ï¼Œè¿™æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå¿…é¡»å®ç°ä»¥ä¸‹æŠ½è±¡æ–¹æ³•ï¼š

ğŸ”· `boolean onCreate()`

å›è°ƒæ–¹æ³•ï¼Œå½“ç³»ç»Ÿé¦–æ¬¡åˆ›å»ºContentProviderå®ä¾‹æ—¶è§¦å‘ï¼Œé€šå¸¸ç”¨æ¥æ‰§è¡Œåˆå§‹åŒ–UriMatcherã€æ•°æ®æºç­‰æ“ä½œã€‚

å½“ContentProvideråœ¨ä¸»è¿›ç¨‹è¿è¡Œæ—¶ï¼Œæ­¤å¤„ä¸å¯æ‰§è¡Œè€—æ—¶æ“ä½œï¼Œé¿å…é˜»å¡UIçº¿ç¨‹å¯¼è‡´ANRã€‚

ğŸ”· `String getType(Uri uri)`

å›è°ƒæ–¹æ³•ï¼Œå½“å®¢æˆ·ç«¯é€šè¿‡ContentResolverçš„ `String getType(Uri uri)` æ–¹æ³•æŸ¥è¯¢æ•°æ®ç±»å‹æ—¶ï¼Œè¯¥å›è°ƒå°†è¢«è§¦å‘ã€‚

æ­¤å¤„åº”å½“è¿”å›URIå¯¹åº”èµ„æºçš„ç±»å‹ï¼Œæ ¼å¼é€šå¸¸ä¸ºMIMEï¼›å¦‚æœä¸éœ€è¦ä½¿ç”¨æ­¤åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥è¿”å›ç©ºå€¼ã€‚

ğŸ”· `Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder)`

å›è°ƒæ–¹æ³•ï¼Œå½“å®¢æˆ·ç«¯é€šè¿‡ContentResolverçš„ `Cursor query(Uri uri)` æ–¹æ³•æŸ¥è¯¢æ•°æ®æ—¶ï¼Œè¯¥å›è°ƒå°†è¢«è§¦å‘ã€‚

æ­¤å¤„åº”å½“è¿”å›æŸ¥è¯¢ç»“æœã€‚å¦‚æœæ•°æ®æºæ˜¯SQLiteï¼Œæˆ‘ä»¬å¯ä»¥é€ä¼ æ‰€æœ‰æŸ¥è¯¢å‚æ•°ç»™SQLiteOpenHelperå¹¶è·å–Cursorç±»å‹çš„ç»“æœï¼›å¦‚æœæ•°æ®æºæ˜¯å…¶ä»–æ ¼å¼ï¼Œæˆ‘ä»¬éœ€è¦è‡ªè¡Œå®ç° `android.database.Cursor` æ¥å£ï¼Œæ„é€ ç¬¦åˆè¦æ±‚çš„Cursorå®ä¾‹ã€‚

ğŸ”· `Uri insert(Uri uri, ContentValues values)`

å›è°ƒæ–¹æ³•ï¼Œå½“å®¢æˆ·ç«¯é€šè¿‡ContentResolverçš„ `Uri insert(Uri uri, ContentValues values)` æ–¹æ³•æ’å…¥æ•°æ®æ—¶ï¼Œè¯¥å›è°ƒå°†è¢«è§¦å‘ã€‚

æ­¤å¤„åº”å½“è¿”å›æ–°æ•°æ®çš„URIï¼›è‹¥æœªèƒ½æ’å…¥æˆåŠŸï¼Œåˆ™åº”å½“è¿”å›ç©ºå€¼ã€‚

ğŸ”· `int delete(Uri uri, String selection, String[] selectionArgs)`

å›è°ƒæ–¹æ³•ï¼Œå½“å®¢æˆ·ç«¯é€šè¿‡ContentResolverçš„ `int delete(Uri uri, String where, String[] args)` æ–¹æ³•æ’å…¥æ•°æ®æ—¶ï¼Œè¯¥å›è°ƒå°†è¢«è§¦å‘ã€‚

æ­¤å¤„åº”å½“è¿”å›äºŒç»´è¡¨ä¸­å—å½±å“çš„è¡Œæ•°ã€‚

ğŸ”· `int update(Uri uri, ContentValues values, String selection, String[] selectionArgs)`

å›è°ƒæ–¹æ³•ï¼Œå½“å®¢æˆ·ç«¯é€šè¿‡ContentResolverçš„ `int update(Uri uri, ContentValues values, String where, String[] args)` æ–¹æ³•æ’å…¥æ•°æ®æ—¶ï¼Œè¯¥å›è°ƒå°†è¢«è§¦å‘ã€‚

æ­¤å¤„åº”å½“è¿”å›äºŒç»´è¡¨ä¸­å—å½±å“çš„è¡Œæ•°ã€‚

<br />

è‹¥å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯åœ¨åŒä¸€è¿›ç¨‹ï¼Œåˆ™æœåŠ¡ç«¯çš„å›è°ƒæ–¹æ³•éƒ½åœ¨è¯¥è¿›ç¨‹å†…æ‰§è¡Œï¼Œä¸ä¼šåˆ†é…å­çº¿ç¨‹ï¼›è‹¥å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯åœ¨ä¸åŒçš„è¿›ç¨‹ï¼Œåˆ™ `onCreate()` æ–¹æ³•åœ¨æœåŠ¡ç«¯ä¸»è¿›ç¨‹ï¼ˆä¸»çº¿ç¨‹ï¼‰ä¸­æ‰§è¡Œï¼Œè€Œå…¶ä»–å›è°ƒæ–¹æ³•ç”±Binderé©±åŠ¨åˆ†é…å­çº¿ç¨‹æ‰§è¡Œã€‚

ç”±äºåŒä¸€æ—¶åˆ»å¯ä»¥æœ‰å¤šä¸ªå®¢æˆ·ç«¯å‘å‡ºè¯·æ±‚ï¼Œå¯¹äºå¢ã€åˆ ã€æ”¹ä¸‰ä¸ªéå¹‚ç­‰æ“ä½œï¼Œæˆ‘ä»¬éœ€è¦åšå¥½åŒæ­¥æœºåˆ¶ï¼Œé¿å…å‡ºç°æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚

æ­¤å¤„æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªCustomProviderç±»ï¼Œç»§æ‰¿è‡ªContentProviderï¼Œå¹¶å®ç°ä¸Šè¿°çš„å›è°ƒæ–¹æ³•ï¼Œå¯¹æ¥SQLiteæ•°æ®åº“çš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½ã€‚

"CustomProvider.java":

```java
public class CustomProvider extends ContentProvider {

    private static final String TAG = "TestApp-" + CustomProvider.class.getSimpleName();

    private DBHelper dbHelper;
    private UriMatcher uriMatcher;

    @Override
    public boolean onCreate() {
        Log.i(TAG, "OnCreate.");
        // åˆå§‹åŒ–æ•°æ®åº“
        dbHelper = new DBHelper(getContext(), "test.db", null, 1);
        // åˆå§‹åŒ–URIåŒ¹é…å™¨
        uriMatcher = new UriMatcher(UriMatcher.NO_MATCH);
        uriMatcher.addURI("net.bi4vmr.provider", "student", 101);
        uriMatcher.addURI("net.bi4vmr.provider", "course", 102);
        return true;
    }

    @Nullable
    @Override
    public Cursor query(@NonNull Uri uri, @Nullable String[] projection, @Nullable String selection, @Nullable String[] selectionArgs, @Nullable String sortOrder) {
        Log.i(TAG, "Query. URI:[" + uri + "]");
        Cursor cursor = null;
        // å°†å®¢æˆ·ç«¯çš„è¯·æ±‚URIä¼ å…¥åŒ¹é…å™¨
        int code = uriMatcher.match(uri);
        switch (code) {
            case 101:
                Log.i(TAG, "åŒ¹é…åˆ°studentè¯·æ±‚ã€‚");
                cursor = dbHelper.getReadableDatabase()
                        .query("student", projection, selection, selectionArgs, null, null, sortOrder);
                break;
            case 102:
                Log.i(TAG, "åŒ¹é…åˆ°courseè¯·æ±‚ã€‚");
                cursor = dbHelper.getReadableDatabase()
                        .query("course", projection, selection, selectionArgs, null, null, sortOrder);
                break;
            default:
                Log.i(TAG, "æœªçŸ¥è·¯å¾„ï¼ Code:[" + code + "]");
                break;
        }

        return cursor;
    }

    /* æ­¤å¤„çœç•¥éƒ¨åˆ†æ–¹æ³•... */
}
```

ä¸Šè¿°ä»£ç ç‰‡æ®µåªå±•ç¤ºäº† `onCreate()` æ–¹æ³•ä¸æŸ¥è¯¢æ–¹æ³•ï¼Œæ–°å¢ã€åˆ é™¤ã€ä¿®æ”¹è®°å½•çš„æ–¹æ³•å®ç°è¯¦è§æœ¬ç« ç¤ºä¾‹ä»£ç ã€‚

æœ€åæˆ‘ä»¬éœ€è¦åœ¨Manifestæ–‡ä»¶ä¸­å£°æ˜è‡ªå®šä¹‰Providerï¼Œå…¶ä¸­ `name` å±æ€§å¯¹åº”ç±»åï¼› `authorities` å±æ€§å¯¹åº”æˆæƒè®°å½•ã€‚

"AndroidManifest.xml":

```xml
<application ...>

    <!-- è‡ªå®šä¹‰Provider -->
    <provider
        android:name=".base.CustomProvider"
        android:authorities="net.bi4vmr.provider"
        android:exported="true"
        tools:ignore="ExportedContentProvider" />
</application>
```

## ç¼–å†™å®¢æˆ·ç«¯
å®¢æˆ·ç«¯ä½¿ç”¨ContentResolverä¸æœåŠ¡ç«¯äº¤äº’ï¼ŒContentResolverçš„æ–¹æ³•ä¸å‰æ–‡æ‰€è¿°çš„ContentProvideræ–¹æ³•ä¸€ä¸€å¯¹åº”ï¼Œä¾‹å¦‚å®¢æˆ·ç«¯è°ƒç”¨ `query()` æ–¹æ³•æ—¶ï¼Œç³»ç»Ÿé¦–å…ˆæ ¹æ®URIä¸­çš„æˆæƒè®°å½•æ‰¾åˆ°å¯¹åº”çš„ç»„ä»¶ï¼Œç„¶åå›è°ƒå…¶ä¸­çš„ `query()` æ–¹æ³•ï¼ŒæœåŠ¡ç«¯é€»è¾‘æ‰§è¡Œå®Œæ¯•åï¼Œç³»ç»Ÿå†å°†å…¶è¿”å›å€¼ä¼ é€’ç»™å®¢æˆ·ç«¯ï¼Œå®Œæˆè·¨è¿›ç¨‹çš„æ•°æ®äº¤äº’ã€‚

æ­¤å¤„ä»¥æŸ¥è¯¢æ–¹æ³•ä¸ºä¾‹ï¼Œå…¶ä»–æ–¹æ³•çš„å®ç°è¯¦è§æœ¬ç« ç¤ºä¾‹ä»£ç ã€‚

"TestUIBase.java":

```java
// å°†URIæ–‡æœ¬è½¬æ¢ä¸ºUriå¯¹è±¡
Uri uri = Uri.parse("content://net.bi4vmr.provider/student");

// è·å–ContentResolverå¯¹è±¡
ContentResolver contentResolver = getContentResolver();
// æŸ¥è¯¢è”ç³»äºº
Cursor cursor = contentResolver.query(uri,
        null, null, null, null);

if (cursor != null) {
    // å¦‚æœæ¸¸æ ‡å†…å­˜åœ¨æ•°æ®ï¼Œåˆ™éå†æ¸¸æ ‡ï¼Œè¯»å–æ¯ä¸ªä¿¡æ¯ã€‚
    if (cursor.moveToFirst()) {
        do {
            int id = cursor.getInt(0);
            String name = cursor.getString(1);
            int age = cursor.getInt(2);

            Log.i(TAG, "Student ID:" + id + ", Name:" + name + ", Age:" + age);
        } while (cursor.moveToNext());
    }
    cursor.close();
}
```

æŸ¥è¯¢ç»“æœCursoræ˜¯ä¸€ä¸ªå¯éå†å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸Šè¿°ä»£ç ç‰‡æ®µä¸­çš„æ–¹æ³•éå†å…¶ä¸­çš„é¡¹ï¼Œè¯»å–æ•°æ®ã€‚

æ­¤æ—¶è¿è¡Œç¤ºä¾‹ç¨‹åºï¼Œå¹¶æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºä¿¡æ¯ï¼š

```text
20:19:58.223 29199 29199 I TestApp-CustomProvider: Query. URI:[content://net.bi4vmr.provider/student]
20:19:58.223 29199 29199 I TestApp-CustomProvider: åŒ¹é…åˆ°studentè¯·æ±‚ã€‚
20:19:58.228 29199 29199 I TestApp-TestUIBase: Student ID:1, Name:Alice, Age:18
20:19:58.230 29199 29199 I TestApp-TestUIBase: Student ID:2, Name:Bob, Age:20
20:19:58.232 29199 29199 I TestApp-TestUIBase: Student ID:3, Name:Charlie, Age:21
```

# åˆå§‹åŒ–æ—¶åºä¸å¤šè¿›ç¨‹
## Processå±æ€§
åœ¨Manifestæ–‡ä»¶çš„ `<provider>` æ ‡ç­¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ  `android:process="<è¿›ç¨‹åç§°>"` å±æ€§ï¼Œæ§åˆ¶ContentProvideræ‰€å±çš„è¿›ç¨‹ã€‚

åœ¨é»˜è®¤é…ç½®ä¸‹ï¼ˆæ²¡æœ‰å£°æ˜è¯¥å±æ€§ï¼‰ï¼ŒContentProviderå°†éšç€å…¶æ‰€åœ¨åº”ç”¨ç¨‹åºçš„ä¸»è¿›ç¨‹åˆå§‹åŒ–ï¼›å½“å£°æ˜è¯¥å±æ€§åï¼ŒContentProviderè·Ÿéšå±æ€§æŒ‡å®šçš„å­è¿›ç¨‹åˆå§‹åŒ–ã€‚

ä¸ContentProvideråœ¨åŒä¸€è¿›ç¨‹çš„å®¢æˆ·ç«¯å‘èµ·æŸ¥è¯¢æ—¶ï¼Œå°†åœ¨è¯¥è¿›ç¨‹çš„ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼›ä¸ContentProvideråœ¨ä¸åŒè¿›ç¨‹çš„å®¢æˆ·ç«¯å‘èµ·æŸ¥è¯¢æ—¶ï¼Œå°†åœ¨Binderé©±åŠ¨åˆ†é…çš„å­çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œä¸ä¼šé˜»å¡ContentProvideræ‰€åœ¨è¿›ç¨‹çš„ä¸»çº¿ç¨‹ã€‚

## MultiProcesså±æ€§
åœ¨Manifestæ–‡ä»¶çš„ `<provider>` æ ‡ç­¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ  `android:multiprocess="< true | false>"` å±æ€§ï¼Œæ§åˆ¶ContentProvideræ˜¯å¦å¯ä»¥åœ¨å¤šä¸ªè¿›ç¨‹ä¸­åˆå§‹åŒ–ã€‚

è¯¥å±æ€§é»˜è®¤å€¼ä¸º"false"ï¼ŒContentProviderä»…ä¼šåœ¨ `android:process="<è¿›ç¨‹åç§°>"` æ‰€æŒ‡å®šçš„è¿›ç¨‹ä¸­åˆå§‹åŒ–ä¸€æ¬¡ï¼›å¦‚æœè¯¥å±æ€§çš„å€¼è¢«è®¾ä¸º"true"ï¼Œåˆ™å…è®¸ContentProvideråœ¨å®¢æˆ·ç«¯è¿›ç¨‹å†…åˆå§‹åŒ–ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯é¦–æ¬¡æŸ¥è¯¢æ—¶éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ContentProviderå®ä¾‹ã€‚

> ğŸš© æç¤º
>
> å› ä¸ºè·¨åº”ç”¨ç¨‹åºè®¿é—®æ•°æ®å­˜åœ¨åŒæ­¥é—®é¢˜ä¸å®‰å…¨æ€§é—®é¢˜ï¼Œè¿™ç§æœºåˆ¶å·²ç»è¢«ç§»é™¤äº†ï¼Œåªæ˜¯SDKä¸­æ²¡æœ‰åˆ é™¤è¯¥å±æ€§æˆ–å°†å…¶æ ‡è®°ä¸ºåºŸå¼ƒã€‚ç»è¿‡å®é™…æµ‹è¯•ï¼Œè¯¥å±æ€§åœ¨Android 8.0åŠæ›´é«˜ç‰ˆæœ¬éƒ½æ˜¯æ— æ•ˆçš„ã€‚
>
> ç›¸å…³ä¿¡æ¯å¯å‚è€ƒä»¥ä¸‹é¡µé¢ã€‚
>
> [ğŸ”— StackOverFlowè®¨è®º](https://stackoverflow.com/questions/24790845/multiprocess-content-providers-synced-to-default-one)
>
> [ğŸ”— Google - IssueTracker](https://issuetracker.google.com/issues/175708197)

## è‡ªå®šä¹‰Applicationç±»
å½“æˆ‘ä»¬ä¸ºå·¥ç¨‹é…ç½®è‡ªå®šä¹‰Applicationç±»åï¼Œé€šå¸¸ä¼šå£°æ˜ä¸€ä¸ªå…¨å±€å˜é‡ï¼›å½“Applicationç±»çš„ `onCreate()` æ–¹æ³•è§¦å‘æ—¶ï¼Œå°†å½“å‰å®ä¾‹ä¿å­˜åœ¨å…¨å±€å˜é‡ä¸­ã€‚

"MyApp.java":

```java
public class MyApp extends Application {

    // é€šè¿‡é™æ€å…¨å±€å˜é‡ä¸ºå…¶ä»–ç»„ä»¶æä¾›å®ä¾‹
    public static MyApp instance;

    // åœ¨"onCreate()"å›è°ƒè§¦å‘æ—¶èµ‹å€¼
    @Override
    public void onCreate(){
        // æ­¤å¤„è¿›è¡Œä¸€äº›åˆå§‹åŒ–æ“ä½œ ...

        // å®Œæˆå˜é‡èµ‹å€¼
        instance = this;
    }
}
```

åœ¨ä¸Šè¿°ç¤ºä¾‹ä»£ç ä¸­ï¼ŒMyAppç±»åˆå§‹åŒ–å®Œæ¯•åï¼Œæ•´ä¸ªå·¥ç¨‹èŒƒå›´å†…éƒ½èƒ½é€šè¿‡ `MyApp.instance` è®¿é—®Applicationå®ä¾‹ã€‚

è¿™ç§æ–¹æ¡ˆåœ¨æ²¡æœ‰ContentProvideræ—¶ç¡®å®èƒ½å¤Ÿæ­£å¸¸è¿ä½œï¼›å¦‚æœå·¥ç¨‹ä¸­å­˜åœ¨ContentProviderï¼Œå¹¶ä¸”æˆ‘ä»¬åœ¨ `onCreate()` æ–¹æ³•ä¸­è·å– `MyApp.instance` ç„¶åè®¿é—®å®ƒçš„å±æ€§æˆ–æ–¹æ³•ï¼Œå°±ä¼šå‡ºç°ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œå¯¼è‡´åº”ç”¨ç¨‹åºæ— æ³•æ­£å¸¸å¯åŠ¨ã€‚

"CustomProvider.java":

```java
public class CustomProvider extends ContentProvider {

    @Override
    public boolean onCreate() {
        /*
         * è·å–Contextï¼Œä»¥ä¾¿åˆå§‹åŒ–å…¶ä»–ç»„ä»¶ã€‚
         * æ­¤å¤„è¿è¡Œæ—¶å°†ä¼šå¯¼è‡´ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚
         */
        MyApp.instance.getApplicationContext();
        return true;
    }
}
```

æ­¤å¤„å‘ç”Ÿå¼‚å¸¸çš„åŸå› æ˜¯ï¼šContentProviderçš„ `onCreate()` æ–¹æ³•æ‰§è¡Œæ—¶æœºæ¯”Applicationçš„ `onCreate()` æ–¹æ³•æ›´æ—©ï¼Œå› æ­¤ `instance` å˜é‡è¿˜æ²¡æœ‰èµ‹å€¼å®Œæˆï¼Œ `MyApp.instance` è¯­å¥è·å–åˆ°çš„å†…å®¹ä¸ºç©ºå€¼ã€‚

å½“åº”ç”¨è¿›ç¨‹åˆå§‹åŒ–æ—¶ï¼ŒApplicationä¸ContentProviderçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ‰§è¡Œé¡ºåºå¦‚ä¸‹æ–‡æ‰€ç¤ºï¼š

1. Applicationçš„ `attachBaseContext(Context base)` æ–¹æ³•ã€‚
2. ContentProviderçš„ `onCreate()` æ–¹æ³•ã€‚
3. Applicationçš„ `onCreate()` æ–¹æ³•ã€‚

ç”±æ­¤å¯è§ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦åœ¨ContentProviderçš„ `onCreate()` æ–¹æ³•ä¸­è®¿é—®Contextå®ä¾‹ï¼Œå¯ä»¥é€‰æ‹©ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š

1. è°ƒç”¨ContentProviderçš„ `getContext()` æ–¹æ³•ï¼Œæ­¤æ–¹æ³•çš„è¿”å›å€¼å³Applicationçš„ `attachBaseContext(Context base)` å›è°ƒæ–¹æ³•çš„å‚æ•°ï¼Œåœ¨ `onCreate()` æ–¹æ³•æ‰§è¡Œæ—¶Applicationçš„ `attachBaseContext()` æ–¹æ³•å·²ç»æ‰§è¡Œå®Œæ¯•ï¼ŒContextå®ä¾‹å¿…ç„¶ä¸ä¸ºç©ºå€¼ã€‚
2. å°†å‰æ–‡ç¤ºä¾‹ä»£ç ä¸­Applicationåˆå§‹åŒ–ä¸å˜é‡èµ‹å€¼çš„é€»è¾‘æå‰è‡³ `attachBaseContext(Context base)` å›è°ƒæ–¹æ³•ä¸­ã€‚
3. å»¶è¿Ÿæ‰§è¡Œç›¸å…³é€»è¾‘ï¼Œç­‰åˆ°å®¢æˆ·ç«¯é¦–æ¬¡å‘èµ·å¢åˆ æ”¹æŸ¥è¯·æ±‚æ—¶ï¼Œå†è®¿é—®Applicationä¸­çš„å…¨å±€å˜é‡ã€‚

è‹¥æˆ‘ä»¬éœ€è¦è®¿é—®Applicationç±»ä¸­çš„è‡ªå®šä¹‰æ¥å£ï¼Œåªèƒ½é€‰æ‹©æ–¹æ³•äºŒæˆ–æ–¹æ³•ä¸‰ï¼›è‹¥æˆ‘ä»¬éœ€è¦è·å–Contextå®ä¾‹ï¼Œæ¨èé€‰æ‹©æ–¹æ³•ä¸€ï¼Œè¿™ç§æ–¹å¼æ— éœ€å¼•ç”¨è‡ªå®šä¹‰Applicationç±»ï¼Œè€¦åˆæ€§æ›´ä½ã€‚

> ğŸš© æç¤º
>
> ContentProviderçš„ `getContext()` æ–¹æ³•è¿”å›ç±»å‹æ˜¯å¯ç©ºçš„ï¼Œæœ‰æ—¶æˆ‘ä»¬éœ€è¦æ·»åŠ é¢å¤–çš„åˆ¤ç©ºé€»è¾‘ã€‚
>
> å½“SDKç‰ˆæœ¬å¤§äºæˆ–ç­‰äºAndroid 11(API 30)æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `requireContext()` æ–¹æ³•è·å–éç©ºContextå®ä¾‹ã€‚
