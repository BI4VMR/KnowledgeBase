# 测试工具

# 添加指定签名

android {
    signingConfigs {
        create("AOSP") {
            storeFile = file("AOSP.keystore")
            storePassword = "AOSPSystem"
            keyAlias = "AOSPSystem"
            keyPassword = "AOSPSystem"
        }
    }

    buildTypes {
        getByName("debug") {
            signingConfig = signingConfigs.getByName("AOSP")
        }
    }

    testBuildType = "debug"

    // 此处省略部分代码...
}


https://developer.android.google.cn/training/testing/local-tests/robolectric?hl=zh-cn

单元测试是软件开发过程中的一种测试方法，旨在验证软件中最小可测试单元（通常是方法或接口）的正确性。例如：我们编写了一个“计算A与B两数之商”的方法，同时也可以编写一些简单的测试用例，包括：“A=10, B=5时返回值应为2”、“A=100, B=0时返回值应为空且程序不会崩溃”等；后续若有开发者修改了此方法，且测试用例全部通过，表明并未影响到既有逻辑，反之，则表明逻辑存在冲突，需要进一步检视。
单元测试使开发者能够确保代码按照预期工作，并在修改代码后尽可能快速地回归验证，从源头降低Bug出现的概率。单元测试也可以作为持续集成和持续交付(CI/CD)流程的一部分，帮助开发者提高代码质量与可维护性。

随着LLM技术的发展，我们可以利用部分模型自动生成单元测试代码。LLM能够理解编程语言的语法和逻辑，并基于给定的功能描述或源代码自动生成相应的单元测试代码。这不仅能够节省开发人员的时间，还可以帮助那些对单元测试不太熟悉的开发者更好地实践测试驱动开发(TDD)。但我们仍需要注意，机器生成的测试代码准确性较低，仍需人工审查和调整以确保其合理性。


# 防止快速点击

    private fun View.clickAntiJitter(interval: Long = 500L, action: (view: View) -> Unit) {
        setOnClickListener {
            val currentTS = SystemClock.uptimeMillis()
            if (currentTS - lastClickTS < interval) {
                Log.w(TAG, "Click too quickly, ignored!")
                return@setOnClickListener
            }
            lastClickTS = currentTS
            action(it)
        }
    }