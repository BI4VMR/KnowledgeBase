# 简介
CLI和GUI提供了人性化的方式以供用户与操作系统交互，然而，部分情况下我们希望自动地、重复地或定时执行某些任务，可能还要实现复杂的判断逻辑，此时人为介入较为不便，我们可以编写脚本实现自动化。

Shell是系统内置的基础工具，无需安装其他组件即可使用，因此Shell脚本是Linux环境下较为常用的。

Shell与编程语言类似，提供了基本运行环境与逻辑判断等功能，但更多的扩展功能还是通过前文介绍的其他程序实现。

本章的前置知识可以参考以下链接：

- [🧭 【链接名称】](../../02_基础应用/02_终端体验.md)
- [🧭 【链接名称】](../../03_高级特性/01_进阶技巧.md#管道符)
- [🧭 【链接名称】](../../03_高级特性/01_进阶技巧.md#重定向)
- [🧭 【链接名称】](../../03_高级特性/01_进阶技巧.md#shell工具)

本章的示例工程详见以下链接：

- [🔗 【链接名称】](【链接地址】)


# 基本元素
## 最小代码片段
下文示例展示了一个最基本的Shell脚本：

🔴 示例一：基本的Shell脚本。

在本示例中，我们创建一个名称为 `test-first.sh` 的文本文件，并写入下文代码块中的内容：

"test-first.sh":

```shell
#!/bin/bash

# 向控制台输出文本
echo "Hello World!"
```

Shell脚本与命令行是类似的，每一行代表一条命令，解释器将按照顺序从前往后依次执行这些命令。

在Shell脚本中，以 `#` 开头的行是注释，它们会被解释器忽略；我们可以在此处对脚本内容进行解释和说明，让人们能够更加轻松地理解代码。

## 解释器声明
在前文“示例一”中，首行注释具有特殊的含义，它声明了该脚本被执行时应当使用的解释器。常见的解释器声明如下文代码块所示：

```text
#!/bin/sh
#!/bin/bash
#!/bin/perl
#!/bin/python2
#!/bin/python3
```

`#!` 是固有格式，其后是解释器的路径。如果我们编写了该部分声明，可以使用以下语法执行脚本，系统会自动调用对应的解释器。

```shell
# 使用脚本首行声明的解释器执行脚本
./test-first.sh
```

该方式要求当前用户具有脚本文件的读取与执行权限。

除了使用解释器声明语句之外，我们也可以明确指定执行脚本时所使用的解释器，此时脚本首部的解释器声明语句会被忽略。

```shell
# 用Bash执行脚本
bash test-first.sh
```

这种方式只要求当前用户能够读取脚本文件即可，不要求拥有执行权限。


# 变量



局部变量小写，全局变量大写



定义变量：变量名=变量值，等号两侧不能有空格（与其它语言可设空格的区别之处）。变量名一般习惯使用大写。
设置变量：set 变量名=变量值。
删除变量：unset 变量名=变量值。
声明静态变量：readonly 变量名，静态变量不能用unset
使用变量：$变量名
变量赋值

    简单赋值：a=123 && echo $a
    命令行赋值给变量

    #使用反引号
    str=`cat helloworld.sh`
    #直接使用 $(..)格式
    os=$(cat /etc/os-release)

局部变量：只在代码块或函数中可见可用。外部不可用。
Bash变量：不区分类型，都是字符串，不允许进行数值计算，除非变量中包含数字。
如果变量的值中间有空格，则使用引号（单引号或双引号均可）扩起来。



5.5 引用变量

引用：将字符串使用双引号扩起来。作用：保护字符串的特殊字符（通配符）不被shell重新解释或者扩展。

[root@centos8 data]# var01=3
[root@centos8 data]# echo $var01
3

在引用变量时，需要使用$来进行引用变量的值。

变量在使用过程中，如果没有$作为前缀，需要思考如下情况：

    被声明或被赋值。
    是否被unset
    被使用export 方式导入
    是否作为信号量。
    赋值的两种方式：
        使用 = 方式。
        直接使用read命令。





<!-- 
14.2 read命令 -- 从控制台读取输入

参考：https://www.computerhope.com/unix/bash/read.htm

从屏幕标准输入中读取一行。默认情况下，read将换行符作视为行的结尾。

read [-ers] [-a array] [-d delim] [-i text] [-n nchars] [-N nchars]
     [-p prompt] [-t timeout] [-u fd] [name ...] [name2 ...]

在while循环中使用的 -r 则是直接使用原始的输入。例如

read -r name        # 读取控制台输入的name值

read -r age         # 读取控制前台输入的age值

14.3 declare命令 -- 声明shell变量

参考链接：https://www.computerhope.com/unix/bash/declare.htm

几个功能

    声明shell变量和函数
    设置属性
    显示值

语法：

declare [-a] [-A] [-f] [-F] [-g] [-i] [-l] [-n] [-r]
        [-t] [-u] [-x] [-p] [name[=value]] [name[=value]] ...

具体使用的例子：

# 数组声明中使用，可加速数组的操作速度
# shellcheck中也会无异常
declare -a arr[]=(...)
-->