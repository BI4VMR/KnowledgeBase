# 浏览文本
## "cat"命令
我们经常需要查看各种文本文件，对于内容较少的文件，可以使用"cat"命令。

"cat"命令的常用选项见下文：

🔷 `-b`

显示行号（不含空行）。

🔷 `-n`

显示行号。

🔷 `-v`

显示不可打印字符。

🔷 `-E`

行尾显示"$"符号。

🔷 `-T`

显示制表符。

🔷 `-A`

相当于"-vTE"。

🔴 示例一

查看DNS配置文件。

```text
[root@Fedora ~]# cat /etc/resolv.conf
# Generated by NetworkManager
nameserver 223.5.5.5
nameserver 180.76.76.76
```

## "more"命令
"cat"命令会将文件的所有内容一次性输出到终端上，对于较长的文本文件，会导致阅读困难，此时我们可以使用"more"命令。

"more"命令会在输出内容填满整个屏幕后暂停，按 `Enter` 后显示下一屏信息，按空格只显示下一行，按 `B` 键返回上一屏信息。

🟠 示例二

查看SELinux的配置文件，从第8行开始显示。

```text
[root@Fedora ~]# more +8 /etc/selinux/config 
# SELINUXTYPE= can take one of three values:
#   targeted - Targeted processes are protected,
#   minimum - Modification of targeted policy. Only selected processes are protected.
#   mls - Multi Level Security protection.
SELINUXTYPE=targeted
```

添加选项 `+[N]` 表示从第N行开始输出内容。

## "less"命令
"less"命令与"more"命令类似，但它不会加载整个文件，对于长文本性能更好。

"less"使用VIM的操作方式，按方向键逐行滚动，按 `B` 键整屏回滚，按 `Q` 键退出。

在一部分发行版中，存在默认别名 `alias more='less'` ，此时"more"命令等同于"less"。

## "head"命令
有时我们仅需查看文件的起始几行，此时可使用"head"命令。

"head"命令的常用选项见下文：

🔷 `-c`

指定需要显示的字节数。

🔷 `-n`

指定需要显示的行数。

🔷 `-v`

显示文件路径。

🟡 示例三

查看当前用户bash配置文件的前6行。

```text
[root@Fedora ~]# head -n 6 .bashrc 
# .bashrc
# User specific aliases and functions

alias rm='rm -i'
alias cp='cp -i'
alias mv='mv -i'
```

## "tail"命令
相对于"head"命令，有时我们仅需查看文件的末尾几行，此时可使用"tail"命令。

"tail"命令的选项基本与"head"相同，其特有的"-f"选项可以开启循环读取功能，若文件被追加新内容，"tail"将会实时刷新控制台显示，此功能对于监控日志文件非常有用。

🟢 示例四

查看DNF日志的最近5条信息，并持续监控。

```text
[root@Fedora ~]# tail -n 5 -f /var/log/dnf.log 
Aug 11 16:11:56 Installed: pyldb-1.5.4-2.el7.x86_64
Aug 11 16:11:56 Installed: pytalloc-2.1.16-1.el7.x86_64
Aug 11 16:11:56 Installed: samba-libs-4.10.16-15.el7_9.x86_64
Aug 11 16:11:56 Installed: samba-common-tools-4.10.16-15.el7_9.x86_64
Aug 11 16:11:56 Installed: samba-4.10.16-15.el7_9.x86_64
```

# 统计文本
当我们需要统计文本中的行数、字符数等信息时，可以使用"wc"命令，其常用选项见下文。

🔷 `-c`

统计字节数。

🔷 `-l`

统计行数。

🔷 `-m`

统计字符数。

🔷 `-w`

统计单词(空白或换行分隔的字符串)数。

🔷 `-L`

找出最长的行并输出长度。

🔴 示例一

准备文本文件"test"以供后续测试，并统计其信息。

```text
[root@Fedora ~]# cat test
1 A f s
2 4 a h
d t 3 a
h G 0 j
d z u 0

[root@Fedora ~]# wc test
 5 20 40 test
```

此处输出的信息依次为：行数、有效字符数、字节数、文件路径。

# 搜索文本
## GREP工具
### 简介
GREP是"Global search Regular Expression Print"的缩写，它是一个强大的文本搜索工具，能够使用正则表达式搜索文本，并把匹配到的行输出到控制台上。

### 基本应用
"grep"命令的语法为： `grep [选项] <表达式> [搜索目标]` ，表达式即待搜索的文本，不包含正则符号时执行模糊搜索；搜索目标可以是单个文件、多个文件以及目录，不填写时默认搜索当前目录。

"grep"命令的常用选项可参考下文内容：

🔷 `-n`

显示搜索结果在其所属文件中的行号。

🔷 `-r`

当搜索目标是目录时，递归搜索子目录中的文件。

🔷 `-i`

忽略大小写。

🔷 `-E`

支持扩展正则表达式。

当我们不添加该选项时， `|` 、 `(` 和 `)` 等特殊符号将被视作普通字符。

🔷 `-v`

取反，输出所有未命中关键词的行。

🔷 `-c`

只统计数量。

🔷 `--color`

使关键词在终端中高亮显示。

🔷 `-f <关键词文件>`

将该文件中的每一行视作一条待搜索的文本。

<br />

我们首先创建一个文本文件，并写入以下内容，以便后续进行测试。

"test.txt":

```text
GNU is not unix.
WINE is not an emulator.
PHP hypertext preprocessor.
The quick brown fox jumps over the lazy dog.
中国智造，慧及全球。
我能吞下玻璃而不伤身体。
```

🔴 示例一

查找测试文件中包含"is"的行，并显示行号。

```text
[root@Fedora ~]# grep -n "is" test.txt
1:GNU is not unix.
2:WINE is not an emulator.
```

🟠 示例二

遍历当前目录及子目录中的文件，查找包含"is"的行，并显示行号。

```text
[root@Fedora ~]# grep -nr "is" ./
./test.txt:1:GNU is not unix.
./test.txt:2:WINE is not an emulator.
```

🟡 示例三

使用管道符传递文本内容给GREP工具，并查找包含"is"的行。

```text
[root@Fedora ~]# cat test.txt | grep "is"
GNU is not unix.
WINE is not an emulator.
```

该用法也可以与实时输出日志的命令相互配合，以便实时地过滤日志信息。

### 正则表达式
正则表达式的常用符号及其含义见下文内容：

🔶 `^`

锚定行首。

🔶 `$`

锚定行尾。

🔶 `.`

匹配任意一个字符。

🔶 `*`

匹配0至多个字符。

🔶 `[C]`

匹配括号内任意一个字符。

🔶 `[C1-C2]`

匹配包含括号内范围任意字符的一个字符。

🔶 `[^C]`

匹配不包含括号内任意字符的一个字符。

🔶 `|`

逻辑或。

🔴 示例一

查找测试文件中以"GNU"开头的行。

```text
[root@Fedora ~]# grep "^GNU" test.txt
GNU is not unix.
```

🟠 示例二

查找测试文件中以大写字母开头的行。

```text
[root@Fedora ~]# grep "^[A-Z]" test.txt
GNU is not unix.
WINE is not an emulator.
PHP hypertext preprocessor.
The quick brown fox jumps over the lazy dog.
```

🟡 示例三

查找测试文件中包含"is"或"the"的行，并忽略大小写。

```text
[root@Fedora ~]# grep -iE "is|the" test.txt
GNU is not unix.
WINE is not an emulator.
The quick brown fox jumps over the lazy dog.
```

### 检索二进制数据
"Grep"工具会将二进制文件的内容视作ASCII字符并参与检索，有时搜索目录中含有大量的图片或视频文件，遍历这些文件并没有意义，为了提高检索速度，此时我们可以禁用二进制文件检索。

若要指定"Grep"工具对于二进制文件的处理方式，我们可以在命令中添加 `--binary-files=<处理方式>` 选项，该选项的有效值及含义详见下文列表：

- `binary` : 默认行为，检索二进制文件的内容，匹配到内容后只显示文件名称但不显示内容摘要。
- `text` : 检索二进制文件的内容，匹配到内容后显示文件名称以及内容摘要。该值与 `-a` 选项等价。
- `without-match` : 不检索任何二进制文件。

### 显示结果上下文

🔷 `-A <下文行数>`

额外输出匹配到的行下文的行数。

🔷 `-B <上文行数>`

额外输出匹配到的行上文的行数。

🔷 `-C <上下文行数>`

额外输出匹配到的行上下文的行数。

# 显示字符串
当我们需要在控制台上显示文本或变量值时，可以使用 `echo [文本]` 命令，如果字符串含有特殊符号，需使用双引号将其包围，避免产生歧义。

"echo"可以识别的特殊字符包括转义字符、Shell变量名等，转义字符详见相关章节： [🧭 Java - 转义字符](../../../编程语言/Java/02-基本语法/06-控制台交互.md#转义字符) 。

"echo"命令的常用选项见下文：

🔷 `-e`

翻译转义字符。

🔷 `-n`

输出不换行。

🔴 示例一

输出"#"组成的正方形，大小为3*3。

```text
[root@Fedora ~]# echo -e "###\n###\n###"
###
###
###
```

🟠 示例二

显示系统环境变量PATH的内容。

```text
[root@Fedora ~]# echo $PATH
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin
```
