# 简介
Linux的目录结构呈树状，以根目录 `/` 为根节点，我们在安装系统时需要将根目录与某个磁盘分区相关联，使用该分区存储系统文件，该分区也被称为根分区或系统分区。

根目录中的各个子目录，默认都存储在系统分区内，我们也可以将某个目录指向其它磁盘分区，此时读写该目录就等同于读写目标分区，而不是原本的系统分区；这种机制被称为挂载，详见相关章节： [🧭 存储管理 - 挂载与卸载](../05_存储管理/01_概述.md#挂载与卸载) 。

# 理论基础
## Linux目录结构
Linux的目录结构如下文代码块所示：

```text
/
├── boot
├── dev
├── etc
├── home
├── mnt
├── opt
├── proc
├── root
├── run
├── sys
├── tmp
├── usr
└── var
```

此处已省略部分内容，仅包含常见的目录，各目录的作用可参考下文内容：

🔷 `/boot`

`/boot` 目录中存放了系统引导阶段所需要的文件，对于支持BIOS引导的主板，我们应将用于启动的FAT32分区挂载到此处。

`/boot/efi` 目录中存放了EFI引导文件，对于支持UEFI引导的主板，我们应将EFI系统分区（也被称为ESP）挂载到此处。

🔷 `/usr`

"usr"是"Unix Shared Resources"的缩写，用于存放程序与源代码、文档等资源。

🔷 `/usr/bin` 和 `/usr/sbin`

前者用于存放普通用户的可执行文件，后者用于存放"root"用户的可执行文件，这些目录是Shell的默认搜索路径，因此我们可以输入名称直接运行其中的程序，而不必输入绝对路径。

🔷 `/usr/lib` 和 `/usr/lib64`

存放动态链接库文件，这些文件可以被多个程序所共享。

🔷 `/etc`

存放系统组件与应用软件的全局配置文件。

🔷 `/var`

"var"是变量(Variable)的缩写，此目录用于存放频繁变化的数据，例如日志文件、网页文件、数据库文件等。

🔷 `/srv`

"srv"是服务(Service)的缩写，此目录用于存放服务数据，例如网页文件、数据库文件等。

该目录是较新的标准中所定义的，旨在将重要的服务数据与可定期清理的日志文件分离，如果系统中存在此目录，我们应当将网页与数据库等文件从 `/var` 目录移动至此处存放。

🔷 `/tmp`

"tmp"是临时(Temporary)的缩写，此目录用于存放临时文件。

该目录通常基于内存文件系统实现，关机后内容会被清空，所以我们不应当在此处存放需要持久化的文件。若要实现持久化，我们可以选择 `/var/tmp/` 等目录。

🔷 `/proc` 、 `/sys` 和 `/run`

系统运行时自动生成的目录，分别是内核与内存中部分数据的映射。

🔷 `/opt`

"opt"是可选(Optional)的缩写，用于安装闭源的软件。

🔷 `/mnt`

"mnt"是挂载(Mount)的缩写，用于挂载磁盘或光盘等存储器。

🔷 `/home`

该目录的子目录是普通用户的主目录，用于存放用户的私有文件。

通常每个用户都拥有一个与其同名的主目录，例如：用户"user1"对应 `/home/user1` 。每个用户只能读写自己的主目录，不能读写其他用户的主目录。

🔷 `/root`

管理员用户"root"的主目录。

因为管理员具有特殊性，该目录与普通用户的主目录不在同一路径中。

🔷 `/lost+found`

系统崩溃或文件系统错误时将会自动生成，用于存放未保存的文件。

## 路径的表示方法
我们使用操作系统时经常需要书写文件的路径，路径的表示方式分为绝对路径与相对路径。

绝对路径以根目录 `/` 为参考点，例如 `/home` 表示根目录下的 `home` 目录； `/root/hello.txt` 表示根目录下的 `root` 目录中的 `hello.txt` 文件。这种表示方法适合所指向的位置不会经常变化的情况。

相对路径以用户当前所在目录为参考点，假如给出路径： `test/hello.txt` ，如果用户当前位于 `/home` ，表示 `/home/test/hello.txt` ；如果用户当前位于 `/tmp` ，则表示 `/tmp/test/hello.txt` 。相对路径比绝对路径更为灵活，但参考点发生变化时可能导致找不到目标，我们可以根据需要使用它。

每个目录下都有两个特殊的节点，分别是 `.` 和 `..` ，前者表示“当前目录”，后者表示“父级目录”。通过这两个节点，我们可以更方便地使用相对路径描述文件位置。

```text
# 查看"/mnt"目录中的所有内容
[root@Fedora ~]# ls -la /mnt
total 8.0K
drwxr-xr-x  2 root root 4.0K Aug  9 11:18 .
dr-xr-x---. 5 root root 4.0K Aug  9 11:18 ..
```

例如 `./config` 表示当前目录下的 `config` 文件； `../tmp/` 表示当前目录上一级中的 `tmp` 目录。

Linux将目录视为可容纳子项的特殊文件，因此若仅给出一个路径，我们无从得知它指向文件还是目录，需要视具体情况而定。为了提高路径的可读性，我们在书写路径时，若指向的目标是目录，可以在路径尾部添加一个斜杠( `/` )符号。

# 查看当前所在路径
部分发行版的命令提示符仅显示用户当前所在目录的名称，例如 `[root@Fedora media]` 中的"media"，若不同路径下还存在同名的目录，容易导致混淆。

`pwd` 命令是"Print Working Directory"的缩写，能够显示用户所在目录的绝对路径，帮助我们确认当前所在的路径。

```text
# 进入"/usr/lib"并显示其绝对路径。
[root@Fedora ~]# cd /usr/lib
[root@Fedora lib]# pwd
/usr/lib


# 进入"/usr/local/lib"并显示其绝对路径。
[root@Fedora lib]# cd /usr/local/lib
[root@Fedora lib]# pwd
/usr/local/lib
```

# 查看目录内容
`ls` 命令是"List"的缩写，可以列出指定目录所包含的子项。

`ls` 命令的语法为： `ls [选项] [目标目录]` ，若不指定目标目录则列出当前工作目录的内容，该命令的常用选项可参考下文内容：

🔷 `-a`

显示所有文件，包括隐藏文件。

🔷 `-d`

仅显示目录。

🔷 `-h`

人性化显示文件大小。

🔷 `-i`

显示文件的inode值。

🔷 `-l`

以列表格式显示文件的详细信息。

🔷 `-F`

为目录名称添加斜杠( `/` )作为后缀。

🔷 `-S`

按文件大小降序排列。

<br />

以列表形式列出目录内容是极为常用的命令，在大多数发行版中， `ls -l` 拥有别名 `ll` ，可以使我们的操作得到简化。

```text
[root@Fedora test]# ll -h
total 8.0K
-rw-r--r-- 1 root root    0 Aug  9 14:05 abc
drwxr-xr-x 2 root root 4.0K Aug  9 14:05 dir1
drwxr-xr-x 2 root root 4.0K Aug  9 14:05 dir2
```

目录内容列表中包含很多信息，其中每一列的含义如下文内容所示：

🔶 第一列

文件属性标记。

首位字母为"d"时表示目录，为"-"时表示普通文件，为"l"时表示链接文件；随后的9位字符表示访问权限。

🔶 第二列

此数字的含义与文件类型有关：

- 对于目录，表示其包含的子目录数量（包括"."和".."）。
- 对于文件，表示其拥有的硬链接数量。

🔶 第三列

文件的所有者，用于配合权限标记以实施访问控制。

🔶 第四列

文件的所属组，用于配合权限标记以实施访问控制。

🔶 第五列

文件大小，默认单位为字节。

添加 `-h` 选项后将自动换算为"KiB"、"MiB"等单位。

🔶 第六列

文件最后被修改的时间。

<br />

在Linux系统中，文件名以"."开头的是隐藏文件，只有添加 `-a` 选项后才会显示在列表中。这种机制与Windows类似，仅针对普通用户，防止其误删重要的文件，文件本身的读写功能不受影响。

# 新建目录
`mkdir` 命令是"Make Directories"的缩写，用于创建目录。

`mkdir` 命令的语法为： `mkdir [选项] <目录1> [目录2] [目录N]...` ，如果我们一次填入多个参数，可以创建若干同级的目录；若要创建具有层次结构的目录，则需要添加 `-p` 选项，递归创建每一层目录。

```text
# 同时创建多个目录
[root@Fedora test]# mkdir dir1 dir2 dir3

# 查看创建结果
[root@Fedora test]# ls
abc  dir1  dir2  dir3


# 递归创建具有层次关系的目录
[root@Fedora test]# mkdir -p dir1/dir11/dir111

# 查看创建结果
[root@Fedora test]# tree -L 3 ./
./
├── abc
├── dir1
│   └── dir11
│       └── dir111
├── dir2
└── dir3

5 directories, 1 files
```

# 切换工作目录
`cd` 命令是"Change Directory"的缩写，用于切换工作目录。

`cd` 命令的语法为： `cd [目标目录]` ，若不指定目标目录，则进入环境变量 `HOME` 所指定的目录。

```text
# 将工作目录切换至前文创建的"dir1/dir11/dir111/"
[root@Fedora ~]# cd dir1/dir11/dir111
```

为了简化操作，我们可以使用一些特殊符号指代特定的目录：

- `cd` 和 `cd ~` 表示进入环境变量 `HOME` 所指定的目录，通常是当前用户的主目录。
- `cd -` 表示进入最近一次切换目录前所在的位置。
- `cd .` 表示进入当前目录，无实际意义。
- `cd ..` 表示进入父级目录。
- `cd /` 表示进入根目录。

# 查看目录结构
`tree` 命令能够以树状格式显示指定目录及其子项的结构，若不指定参数，则显示当前目录的结构。该命令依赖于软件包"tree"，可能需要手动安装。

`tree` 命令的常用选项可参考下文内容：

🔷 `-a`

显示所有文件，包括隐藏文件。

🔷 `-d`

仅显示目录。

🔷 `-f`

显示绝对路径。

🔷 `-p`

显示权限标记。

🔷 `-u`

显示所有者。

🔷 `-g`

显示所属组。

🔷 `-s`

显示文件大小。

🔷 `-h`

人性化显示文件大小，须配合"-s"选项使用。

🔷 `-n`

不对显示结果进行着色。

🔷 `-A`

使用ASNI绘图字符输出。

🔷 `-D`

显示更改时间。

🔷 `-L`

指定最大访问深度。

<br />

此命令的使用方法可参考前文示例。
