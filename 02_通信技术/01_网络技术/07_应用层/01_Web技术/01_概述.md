Tomcat是一个Java Servlet容器，它用于运行Java Web应用程序。它可以处理HTTP请求并将其传递给Java应用程序进行处理。Tomcat提供了一个容器，用于加载、执行和管理Java Servlet、JavaServer Pages（JSP）和其他Java Web技术。

相比之下，Nginx是一个高性能的Web服务器和反向代理服务器。它专注于处理静态资源和负载均衡。Nginx以其出色的性能和高并发处理能力而闻名，可以处理大量的并发连接和请求。

那么为什么在使用Tomcat时还需要Nginx呢？

1、静态资源服务

Nginx可以高效地提供静态文件（如HTML、CSS、JavaScript等），减轻Tomcat的负担。由于Nginx专注于静态资源的传输，它可以更快地响应客户端请求，并节省了Tomcat处理这些请求的资源。

2、负载均衡

当有多个Tomcat实例运行同一个应用程序时，Nginx可以作为负载均衡器，根据一定的策略将请求分发给不同的Tomcat实例。这样可以提高系统的可伸缩性和容错性，确保每个Tomcat实例都能平均分担负载。

3、反向代理

Nginx可以作为反向代理，将来自客户端的请求转发到内部的Tomcat服务器。这样可以提高系统的安全性，隐藏真实的Tomcat服务器地址，防止直接暴露在公网中。

4、缓存和压缩

Nginx支持缓存静态资源，当客户端请求相同的资源时，它可以直接返回缓存的副本，减少网络传输时间和服务器负载。此外，Nginx还可以对响应内容进行压缩，减小传输的数据量，提高网络传输效率。

综上所述，使用Nginx作为Tomcat的前端服务器可以提升系统的性能、可伸缩性和安全性，同时还可以通过负载均衡和反向代理等功能来优化Web应用的部署和运行。

经典场景

Tomcat和Nginx在Web应用部署中可以有以下典型的场景：

1、单一应用场景

Tomcat场景

当只有一个Java Web应用需要运行时，可以直接使用Tomcat作为Web服务器和Servlet容器。Tomcat可以处理HTTP请求并将其传递给Java应用程序进行处理。

Nginx场景

在单一应用场景中，Nginx可以用作静态资源服务器和反向代理服务器。Nginx负责提供静态文件服务，如HTML、CSS、JavaScript等，并将动态请求转发到Tomcat进行处理。这样可以减轻Tomcat的负担和提高系统的性能。

2、多应用负载均衡场景

Tomcat场景

有多个Tomcat实例运行同一个Java Web应用时，每个Tomcat实例都可以独立处理请求。通过配置负载均衡算法和会话复制机制，Tomcat可以实现请求的分发和会话管理。

Nginx场景

Nginx在这种场景下作为负载均衡器，将来自客户端的请求根据一定的策略（如轮询、IP哈希等）分发给不同的Tomcat实例。这样可以提高系统的可伸缩性和容错性，确保每个Tomcat实例都能平均分担负载。

3、高并发静态资源场景

Tomcat场景

Tomcat对于处理动态请求非常强大，但在处理静态资源方面相对较慢。当系统需要大量处理静态资源时，Tomcat可能成为性能瓶颈。

Nginx场景

Nginx专注于处理静态资源，具有出色的性能和高并发处理能力。将Nginx作为静态资源服务器可以提高系统的响应速度，并减轻Tomcat的负担。

4、安全加固场景

Tomcat场景

Tomcat提供了一些基本的安全特性，如SSL/TLS支持、访问控制等。但在处理恶意请求、防止DDoS攻击等方面可能比较脆弱。

Nginx场景

Nginx作为反向代理服务器，可以提供额外的安全层，例如限制请求频率、封禁恶意IP、解析器漏洞防护等。将Nginx放置在Tomcat之前可以增强系统的安全性，保护Tomcat服务器免受攻击。

两者对比

1、功能不同

Tomcat是一个Servlet容器，用于运行Java Web应用程序，它可以处理HTTP请求并将其传递给Java应用程序进行处理。相比之下，Nginx是一个高性能的Web服务器和反向代理服务器，专注于处理静态资源和负载均衡。

2、部署方式不同

Tomcat需要安装Java运行环境，然后将Web应用程序部署到Tomcat容器中。而Nginx只需安装即可，无需配置Java环境。

3、处理请求方式不同

Tomcat使用Java线程池机制来处理请求，每个请求都会创建一个线程。而Nginx使用事件驱动模型，将所有请求放入一个事件队列中，由一组工作进程异步地处理所有请求。

4、处理请求的性能不同

由于Nginx采用了事件驱动模型和异步处理方式，具有出色的性能和高并发处理能力。相比之下，Tomcat在处理大量并发请求时可能会存在性能问题。

5、主要应用场景不同

Tomcat主要用于Java Web应用程序开发和部署，而Nginx主要用于提供高性能的静态文件服务、负载均衡和反向代理等功能。
————————————————

                            版权声明：本文为博主原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接和本声明。
                        
原文链接：https://blog.csdn.net/qq_36877763/article/details/136621639



# 理论基础
## URI与URL
统一资源定位器(Uniform Resource Locator, URL)用于表示网络节点中的资源，最常见的用途就是表示Web页面，例如：我们在浏览器地址栏中输入 `https://www.bing.com/` 能够访问微软必应主页。除此之外，URL也可以表示其他资源，例如：SSH地址、邮箱地址等。

URL的通用语法如下文代码块所示：

```text
# 语法
<协议>://[<用户>[:<认证口令>]@][目标地址][:<端口>]/[资源路径]/[资源名称][?<查询参数>][#<路由标签>]

# 示例：使用Web访问"www.example.com"网站的"/admin"页面。
http://www.example.com/admin

# 示例：使用Web访问"www.example.com"网站中"/share"目录下的"music.zip"文件。
http://www.example.com/share/music.zip

# 示例：使用FTP访问"www.example.com"网站的"/files"目录。
ftp://www.example.com/files

# 示例：使用FTP访问"www.example.com"网站的"/files"目录，并使用特定的端口。
ftp://www.example.com:2121/files

# 示例：使用FTP访问"www.example.com"网站的"/files"目录，并设置用户名称与认证口令。
ftp://user:password@www.example.com/files
```

URL语法中各个部分的含义详见下文内容：

🔷 协议类型

本部分指明了访问该资源应当使用的协议，对于HTTP、HTTPS等协议，浏览器将会显示网页或下载文件；对于浏览器不支持的协议，浏览器将会打开系统中能够处理此协议的软件，并传递地址信息，例如：当我们访问 `mailto: someone@example.com` 时，浏览器将会打开默认的邮件程序，并将 `someone@example.com` 填入收件人栏。

🔷 认证信息

本部分指明了访问者的身份信息，用户名称与认证口令之间以冒号( `:` )分隔。

对于公开的站点，该部分可以省略，例如： `https://www.bing.com/` ；对于受保护的站点，我们通常只在URL中声明用户名称，再通过其他方式进行认证，避免明文的URL导致认证口令泄漏，例如： `ssh://root@192.168.1.1/` 。

🔷 目标地址

本部分指明了资源所在的设备地址，可以是域名或IP地址。

当我们使用URL表示本机的资源时，可以直接省略地址部分：

```text
# 示例：访问本地"/"目录下的"picture.png"文件。
file://127.0.0.1/picture.png

# 示例：访问本地"/"目录下的"picture.png"文件（省略目标地址）。
file:///picture.png
```

在上述示例中，地址格式基于Unix系统；对于Windows系统，我们需要将原始路径中的反斜杠( `\` )转换为斜杠( `/` )，例如：

```text
# 示例：访问D盘"Download"目录下的"Document.pdf"文件。
file:///d:/Download/Document.pdf
```

🔷 端口

本部分指明了访问该资源应当使用的传输层端口。

每种协议都有默认的端口，例如：HTTP使用TCP 80端口、SSH使用TCP 22端口，如果我们省略端口声明，浏览器将根据协议类型访问目标主机的对应端口。

🔷 查询参数

本部分指明了对目标资源的筛选条件等额外信息，Web服务器将会根据参数返回不同的内容。

我们可以同时输入多个参数，此时参数之间以符号 `&` 分隔，例如： `start=100&end=200` 。

🔷 路由标签

本部分指明了网页中的章节或片段，如果我们不指定路由标签，网页通常会从最顶端开始呈现；当我们指定路由标签后，网页将会自动滚动至对应的位置。

<br />

统一资源标识符(Uniform Resource Identifier, URI)是URL的超集，所有的URL都属于URI，但URI不一定符合URL标准。每种URI只在其特定的领域有意义，例如：在Android系统中， [🧭 Content URI](../../../../07_平台应用开发/01_Android/04_系统组件/03_ContentProvider/01_概述.md#uri) 用于表示应用程序数据，我们无法通过Web浏览器访问这种URI。

## UserAgent
用户代理(User Agent, UA)是HTTP请求报文头部的一个字段，用于声明客户端与操作系统的环境信息；Web服务器可以根据UA动态返回相应的内容，以提升用户体验，例如：当我们用PC浏览器与手机浏览器访问同一网站时，服务器所返回的页面布局是不同的；当我们用Windows与Linux系统访问同一软件的下载地址时，服务器所返回的软件包格式也是不同的。

有时服务器会利用UA判断请求者是人类用户还是爬虫等自动化工具，但这种方式无法精确区分用户类型，因为自动化工具可以将UA设为常见浏览器的值，以此伪装自己。

UA的语法如下文代码块所示：

```text
# 语法
Mozilla/5.0 ([平台信息1]; [平台信息2]; [平台信息...]) [<引擎名称>/<引擎版本>] [<浏览器名称>/<浏览器版本>]

# Chrome
Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Safari/537.36

# Firefox
Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:128.0) Gecko/20100101 Firefox/128.0
Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0

# Safari
Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_8; en-us) AppleWebKit/534.50 (KHTML, like Gecko) Version/5.1 Safari/534.50

# Android
Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Mobile Safari/537.36

# iPhone
Mozilla/5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1

# iPad
Mozilla/5.0 (iPad; CPU OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1
```

UA语法中各个部分的含义详见下文内容：

🔷 Mozilla/5.0

这是所有浏览器的通用标记，表示浏览器与Mozilla兼容。

由于历史遗留问题，不论是Mozilla Firefox、Google Chrome还是其他浏览器，它们都会将自己声明为"Mozilla/5.0"。对于主要功能并非显示网页的工具，它们不会携带该标记，只是简单的声明工具名称与版本号，例如： `qBittorrent/4.4.5.10` 、 `python-requests/2.18.4` 。

🔷 平台信息

本部分指明了客户端的操作系统与硬件架构等信息，可能包含多个子项，子项之间以分号( `;` )分隔。

🔷 引擎信息

本部分指明了客户端Web渲染引擎的相关信息。

🔷 浏览器信息

本部分指明了客户端的相关信息。

## MIME
多用途互联网邮件扩展(Multipurpose Internet Mail Extensions, MIME)也被称为“IANA媒体类型”，用于描述电子邮件中各部分内容的格式，相关标准在RFC 2045、RFC 2046、RFC 2047、RFC 2048、RFC 2049等文档中定义与演进。现今MIME已经成为描述数据类型的通用标准之一，除了电子邮件之外，还被广泛应用于网络协议、Web技术、操作系统等领域。

MIME将媒体类型分为两个层级：第一级为概略类型，描述媒体内容属于文本、图像或音频等；第二级为详细类型，例如：文本中的HTML、图片中的JPEG等。

MIME的语法为： `<概略类型>/<详细类型>` ，概略类型与详细类型之间使用斜杠( `/` )作为分隔符，整个字符串中不能出现空格。MIME并不区分大小写，按照惯例我们会将所有字母小写。

MIME的常见概略类型如下文内容所示：

🔷 `text`

文本数据，通常是人类可读的文字与符号组合。

该类别中常见的详细类型如下文列表所示：

- `text/plain` : 纯文本，任何没有具体格式的文本都可以填写该值。
- `text/html` : HTML文件。
- `text/javascript` : JavaScript文件。

🔷 `image`

图像数据，包括静态图像与动态图像。

该类别中常见的详细类型如下文列表所示：

- `image/jpeg` : JPEG图像。
- `image/png` : PNG图像。
- `image/webp` : WEBP图像。
- `image/gif` : GIF图像。

🔷 `audio`

音频数据。

该类别中常见的详细类型如下文列表所示：

- `audio/wav` : WAV音频。
- `audio/mpeg` : MPEG音频。
- `audio/ogg` : OGG音频。
- `audio/webm` : WEBM音频。

🔷 `video`

视频数据。

该类别中常见的详细类型如下文列表所示：

- `video/x-msvideo` : AVI视频。
- `video/webm` : WEBM视频。

🔷 `application`

应用程序数据，包括不在前文标准类型中的文本数据、音视频数据、其他二进制数据以及程序之间约定的自定义类型。

该类别中常见的详细类型如下文列表所示：

- `application/octet-stream` : 格式未知的字节数据流。当数据格式通过其他方式另行约定时，MIME应当填写该值。
- `application/pdf` : PDF文件。
- `application/pkcs12` : SSL证书。
- `application/vnd.mspowerpoint` : Microsoft PowerPoint演示文稿。

自定义MIME类型也被称为"Vendor-Specific MIME Types"，因此非标准类型通常以"vnd"字样开头。

<br />

MIME的作用与文件扩展名类似，但它们之间并不能直接转换，例如：MP3文件所对应的MIME不是 `audio/mp3` ，应当写作 `audio/mpeg` 。MIME与常见文件格式的对应关系可参考 [🔗 Mozilla - MIME与常见文件格式的对应关系](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types) 页面。

<!-- TODO
## Base系列编码
### 简介


> ⛔ 禁止
>
> Base系列编码并非加密算法，严禁明文传输包含敏感信息的编码字符串。
>
> 虽然经过Base算法编码后的文本人类不可读，但它们具有一些明显的编码特征，攻击者截获文本后，只需尝试使用各种常见的编码算法进行解码，就会得到人类可读的原始内容。

-->
