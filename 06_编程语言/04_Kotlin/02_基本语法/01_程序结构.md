# 基本元素
## 最小代码片段
我们新建一个文本文件，名称为 `TestFirst.kt` ，内容如下文代码块所示：

"TestFirst.kt":

```kotlin
// "main"方法，是程序的入口。
fun main(args: Array<String>) {
    // 在控制台上显示文字
    println("Hello World!")
}
```

这是一个Kotlin应用程序的基本结构，Kotlin支持以脚本方式运行，所以我们可以直接书写方法，不必书写类的结构； `main()` 方法必须作为文件的顶层元素，不能作为类的成员方法。

`main()` 方法是程序的入口，当程序开始运行时，将会从此处开始执行代码语句；其中的语句都执行完毕时，程序运行结束。

为节约篇幅与缩进，后文的示例代码若无特殊说明，均省略类与 `main()` 方法定义，只展示关键内容。

## 关键字
编程语言中具有特殊含义的单词被称为关键字，编译器会识别特定的关键字并将语句翻译为对应的机器指令。

Kotlin中常用的关键字如下文表格所示：

<div align="center">

|   关键字   | 关键字  |  关键字  | 关键字  | 关键字  |
| :--------: | :-----: | :------: | :-----: | :-----: |
| `abstract` |  `as`   | `break`  | `catch` | `class` |
| `continue` |  `do`   | `double` | `else`  | `false` |
| `finally`  | `float` | `float`  |  `for`  |  `fun`  |
|    `if`    |  `is`   | `import` | `when`  |  `try`  |

</div>

Kotlin中的关键字是区分大小写的，例如：我们可以使用"Void"作为标识符，因为它与关键字"void"并不相同。

## 标识符
标识符是我们为变量与方法等元素所起的名字，不能与关键字冲突。除此之外，我们在起名时还需要遵循一些规则，以提高程序的可读性：

- 标识符可以由字母、数字、下划线("_")、美元符("$")组成，不能包含"@"、"%"以及空格等特殊字符，并且不能以数字开头。
- 标识符严格区分大小写，例如"abc"和"ABC"是两个不同的标识符。
- 标识符不能是关键字，但允许包含关键字的字符。
- 标识符应当直观地反映出变量或方法的作用，最好做到见名知意。
- 标识符应当仅包含ASCII字符，不应出现中文、日文、韩文等字符；非ASCII字符在跨平台操作时可能会出现乱码等问题。

下文表格展示了一些标识符示例：

<div align="center">

|    标识符     | 可用性 |                原因                |
| :-----------: | :----: | :--------------------------------: |
|   `123name`   |   ❌    |           不能以数字开头           |
| `abc@163.com` |   ❌    |          不能包含"@"字符           |
|    `void`     |   ❌    |       不能与关键字"void"冲突       |
|    `Void`     |   ✅    |   首字母为大写，未与关键字冲突。   |
|   `myvoid`    |   ✅    | 包含关键字"void"，未与关键字冲突。 |

</div>

## 语句
每条语句都是一个指令，程序运行至此时将会执行指令对应的操作。例如 `println("Hello World!")` 表示在控制台上输出"Hello World!"文本。

在Kotlin语言中，不需要分号作为语句结束的标志，编译器将会尝试自动解析每条语句。

# 变量
## 简介
变量是存储在内存中的数据块，用于描述事物的属性，例如学生的姓名、年龄、性别等。我们通过以下三个元素描述一个变量：数据类型、变量名称以及变量的值。

变量名称用于唯一标识某个变量。我们给变量命名时，需要遵循标识符规则、尽量简短且能见名知意，例如：定义变量"studentName"用于保存“学生姓名”信息。

Kotlin中的变量名由多个单词组成时，首个单词的首字母应当小写，后续单词的首字母大写，这种方式称为驼峰命名法，如"myAge"、"studentName"等。

声明变量的相关语法及示例详见下文代码块：

```kotlin
// 声明变量并赋值
var <变量名称>: <数据类型> = <变量的值>;

// 声明变量但暂不进行赋值
var <变量名称>: <数据类型>;


// 示例：变量“年龄”
var age: Int = 20;

// 示例：变量“姓名”
var name: String = "张三";
```

## 数据类型
Kotlin中的数据类型分为基本数据类型和引用数据类型，基本数据类型变量直接存储数据的值，而引用数据类型变量存储的是保存数据值的内存地址。虽然Kotlin中也存在基本与引用两种数据类型，但基本数据类型在代码中以包装类的形式存在，便于用户表示空值与调用方法。

Kotlin是一种强类型语言，每个变量都有明确的类型，因此我们声明变量的同时还要指明它的类型。Kotlin编译器支持类型推断，我们在声明变量时可以省略数据类型部分。

```kotlin
// 声明变量并省略数据类型
var <变量名称> = <变量的值>;


// 示例
var age = 20;
var name = "张三";
```

常用的数据类型如下文表格所示：

<div align="center">

|   类型    |     说明     |      应用      |             示例              |
| :-------: | :----------: | :------------: | :---------------------------: |
|  `Byte`   |    字节型    |    存储整数    |     `var state: Byte = 1`     |
|  `Short`  |    短整型    |    存储整数    |     `var age: Short = 21`     |
|   `Int`   |     整型     |    存储整数    |    `var index: Int = 100`     |
|  `Long`   |    长整型    |    存储整数    | `var sec: Long = 1555560167L` |
|  `Float`  | 单精度浮点型 |    存储小数    | `var height: Float = 175.2F`  |
| `Double`  | 双精度浮点型 |    存储小数    |  `var price: Double  = 15.5`  |
| `Boolean` |    布尔型    | 表示“真”或“假” |  `var flag: Boolean = true`   |
|  `Char`   |    字符型    |  存储单个字符  |    `var sex: Char = '男'`     |
| `String`  |    字符串    |  存储多个字符  |  `var name: String = "User"`  |

</div>

下文内容将对每种数据类型的详细信息作出说明：

🔷 `Byte` 类型

字节型，内存分配1字节，占用8个二进制位，取值范围： `[-128, 127]` 。

🔷 `Short` 类型

短整型，内存分配2字节，占用16个二进制位，取值范围： `[-32768, 32767]` 。

🔷 `Int` 类型

整型，内存分配4字节，占用32个二进制位，取值范围： `[-2147483648, 2147483647]` 。

这是整数的默认类型。

🔷 `Long` 类型

长整型，内存分配8字节，占用64个二进制位，取值范围： `[-9223372036854775808, 9223372036854775807]` 。

声明长整型时，数值后需要添加一个标记"L"，以此与 `Int` 类型作区分。

🔷 `Float` 类型

单精度浮点数，内存分配4字节，占用32个二进制位，最大有效小数位为7位。

声明单精度浮点数时，数值后需要添加一个标记"F"，以此与 `Double` 类型作区分。

🔷 `Double` 类型

双精度浮点数，内存分配8字节，占用64个二进制位，最大有效小数位16位。

这是小数的默认类型。

🔷 `Boolean` 类型

布尔值，内存分配视系统环境而定，值只能为"true"或"false"。

Kotlin中的 `Boolean` 变量与数字不能相互自动转换，例如语句 `val state: Boolean = 1` 将会导致编译错误。

🔷 `Char` 类型

`Char` 类型表示字符，只能存储单个字符，定义时值需要使用单引号包围，例如 `val x: Char = 'A'` 。

Kotlin中的 `Char` 变量与数字不能相互自动转换，例如语句 `val x: Char = 65` 将会导致编译错误。

🔷 `String` 类型

`String` 是一种常见的引用数据类型，可以存储多个字符组成的序列，定义时值需要使用双引号包围，如 `String name = "tom"` 。

在程序开发中，许多操作都要借助字符串来完成，例如处理系统中的用户名、密码、电子邮箱等。

<br />

当我们使用类型推断声明变量时，数字的默认类型为 `Int` ，如果数值超出整型的范围则为 `Long`，如果我们期望的类型与默认类型不一致，则应当指明类型。

> 🚩 提示
>
> Kotlin为了实现跨平台特性，预先规定了每种数值类型的范围，因此我们不必担心同一种类型在不同的硬件架构上超出最大取值范围。

> ⚠️ 警告
>
> 由于二进制存在量化失真，部分浮点数不能无损地转为二进制，因此计算过程中可能产生误差。
>
> 当我们给 `Double` 类型变量赋值"0.1234"，再使用该变量与"0.0234"相减，将会得到结果"0.09999999999999999"。
>
> 为了解决金融与数学等领域的计算精度问题，我们可以使用Java提供的BigDecimal等工具，不能使用 `Double` 类型。

## 常量
常量是一种特殊的变量，它的值必须在声明时即确定，并且不允许更改，适当地使用常量可以提高代码的可维护性。

声明常量与变量的语法类似，只需将"var"关键字替换为"val"即可。

```kotlin
// 声明常量并赋值
val <标识符>: <数据类型> = <变量的值>;

// 示例：常量"PI"
val PI: Double = 3.141592653
```

常量名称一般全部字符都为大写，多个单词之间使用下划线("_")分隔。

对于部分常见的数值，我们可以通过常量名称得知其含义。例如前文的圆周率 `PI` ，如果算式中多次出现"3.1415"，可能导致阅读困难，并且在书写时也更容易出错。这种直接使用数值而不引用常量的行为被称为“魔法数字”，我们应当避免在编码中出现这种情况。

除了数字常量，我们也经常使用字符型常量，例如：为了表示用户的性别，我们可以定义一个常量 `SEX_MALE` ，赋值为"男"；在需要指定性别的地方直接调用常量，这样就避免了输入不规范而导致程序出错的情况。

# 注释
注释(Comment)是对代码的解释和说明，其目的是让人们能够更加轻松地理解代码。在编译过程中，注释语句会被编译器忽略并移除，最终生成的程序中不会包含任何注释语句。

Kotlin中的注释有三种类型：

- 单行注释以 `//` 开头，行末自然结束，正如前文示例中的描述文本。
- 多行注释以 `/*` 开头，以 `*/` 结尾，中间的行都被视为注释文本。
- 文档注释以 `/**` 开头，以 `*/` 结尾，允许多行，通常用于描述类与方法的详细信息。

我们可以在文档注释中使用一些KDoc标记，以便通过Dokka等工具生成详细的程序说明文档。

🔷 `@version <版本号>`

声明类的版本。

🔷 `@author <作者>`

声明类或方法的作者。

🔷 `@see <类或方法名称>`

表示另请参见类或方法。

🔷 `@param <参数名称> <参数含义>`

说明方法的参数及其含义。

为了更明显的标记参数，我们也可以使用以下语法书写参数说明： `@param[<参数名称>] <参数含义>` 。

🔷 `@return <返回值含义>`

说明方法的返回值含义。

🔷 `@exception <异常名称> <异常说明>`

说明方法可能抛出的异常信息。

🔷 `@since <版本号>`

说明方法首次创建时程序的版本号。

<br/>

文档注释中所有非"@"标记开头的行、"@"标记中的说明文本都属于描述信息，我们可以在其中添加以下特殊符号：

🔷 `[显示名称] [<类或方法>]`

指向类或方法的链接。

该标记在文档中显示为可以点击跳转的链接，下文列表提供了一些示例：

- `[BigDecimal]` : 链接到BigDecimal类。
- `[BigDecimal.ZERO]` : 链接到BigDecimal类的属性 `ZERO` 。
- `[BigDecimal.add]` : 链接到BigDecimal类的方法 `add(BigDecimal augend)` 。

KDoc与JavaDoc不同，指向方法时也需要使用点(".")进行连接，而不是 `#<方法名称>` ；并且不支持通过参数列表指向某个重载方法。

如果类已经在当前文件首部通过 `import` 语句导入，则链接中可以直接书写类名；否则需要书写为完全限定名称。

若我们需要指向某个URL，则应当使用Markdown语法书写：

```md
[外部网站](https://www.example.com)
```

🔷 `<空行>`

换行标记。

在Dokka工具生成的文档中，换行符将会显示为空格；为了实现换行显示，我们需要在两行文本之间添加一个空行。

"@"标记开头的行将会自动换行，我们无需手动添加换行标记。
