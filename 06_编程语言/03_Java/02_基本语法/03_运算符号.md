# 赋值运算符
赋值运算符(` = `)的外观与数学中的等号相同，但它们的含义却并不相同，赋值运算符的作用是将右侧表达式的结果赋给“左值”。左值是指位于赋值运算符左侧的、可被赋值的表达式，最常见的左值就是变量。

除了普通的赋值运算符，Java还提供了一些组合赋值符号，用于简化操作，常见的赋值运算符可参考下文表格：

<div align="center">

| 运算符 |  名称  |
| :----: | :----: |
|  `=`   |  赋值  |
|  `+=`  | 加等于 |
|  `-=`  | 减等于 |
|  `*=`  | 乘等于 |
|  `/=`  | 除等于 |
|  `%=`  | 模等于 |

</div>

下文示例展示了赋值运算符的使用方法。

🔴 示例一：赋值运算符的基本应用。

在本示例中，我们使用赋值运算符操作变量。

"TestOperator.java":

```java
int a = 5;
int b = a;

// 使用普通表达式
a = a + 2;
System.out.println("a:" + a);

// 使用“加等于”符号
b += 2;
System.out.println("b:" + b);
```

此时运行示例程序，并查看控制台输出信息：

```text
a:7
b:7
```

根据上述输出内容可知：

变量 `a` 和 `b` 的初始值都为"5"，我们将 `a` 的值读出，加上"2"之后再赋值给 `a` ，最终变量 `a` 的值被修改为"7"。

“将变量与另一个数值进行四则运算、再将结果赋值给原始变量”是一个常用操作，我们可以使用“加等于”等符号简化表达式，例如： `a = a + 2` 等价于 `a += 2` （在上述代码中用 `b` 表示）。

# 算术运算符
## 简介
算术运算符用于进行各种数学计算，常见的算术运算符如下文表格所示：

<div align="center">

| 运算符 | 名称  |
| :----: | :---: |
|  `+`   | 加法  |
|  `-`   | 减法  |
|  `*`   | 乘法  |
|  `/`   | 除法  |
|  `%`   | 取余  |
|  `++`  | 自增  |
|  `--`  | 自减  |

</div>

## 基本的四则运算
下文示例展示了四则运算符的使用方法。

🟠 示例二：基本的四则运算。

在本示例中，我们使用算术运算符进行基本的四则运算。

"TestOperator.java":

```java
int a = 5 + 12;
int b = 25 - 10;
int c = 3 * 8;
int d = 24 / 7;
int e = 24 % 7;
double f = 24.0 / 7;

System.out.println("5 + 12 = " + a);
System.out.println("25 - 10 = " + b);
System.out.println("3 * 8 = " + c);
System.out.println("24 / 7 = " + d);
System.out.println("24 % 7 = " + e);
System.out.println("24.0 % 7 = " + f);
```

此时运行示例程序，并查看控制台输出信息：

```text
5 + 12 = 17
25 - 10 = 15
3 * 8 = 24
24 / 7 = 3
24 % 7 = 3
24.0 % 7 = 3.4285714285714284
```

对于整数除法，Java表达式的结果只包含整数部分，小数部分将被舍弃。若要进行小数除法计算，我们需要确保参与计算的操作数中至少有一个为浮点数。

## 自增与自减运算
自增运算符是一种简洁记法，它只能操作单个数值型变量，效果是使变量的整数数值增加"1"，例如 `i++` 等效于 `i = i + 1` ；自减运算符的效果与自增运算符相反，会使变量的整数数值减少"1"。

自增与自减符号既可以出现在操作数的左边，也可以出现在右边，但这两种情况的效果是不同的。

🟡 示例三：自增运算符的基本应用。

在本示例中，我们使用自增运算符操作变量。

"TestOperator.java":

```java
int a = 5;
int b = 5;

System.out.println("自增符号在前：" + (++a));
System.out.println("自增符号在后：" + (b++));
System.out.println("a = " + a + "; b = " + b);
```

此时运行示例程序，并查看控制台输出信息：

```text
自增符号在前：6
自增符号在后：5
a = 6; b = 6
```

根据上述输出内容可知：

变量 `a` 与 `b` 执行自增后，最终数值都从"5"变成了"6"。但 `++a` 先对变量 `a` 进行自增，再进行其它操作（此处为向控制台输出文本）；而 `b++` 先执行其它操作，最后再对变量 `b` 进行自增。

## 特殊数值
### 简介
除法运算的结果可能不是数字，我们应当注意此类情况，并在必要时进行兜底处理，防止程序发生异常。

### 无穷大
两个整型数值相除时，如果除数为"0"，系统会抛出异常；而两个浮点型数值相除时，如果除数为"0"，则结果为“无穷大”。

🟢 示例四：结果为“无穷大”的表达式。

在本示例中，我们使用某个数除以浮点数的"0"，并观察计算结果。

"TestOperator.java":

```java
// 非0正数除以0，结果为正无穷。
double a = 100 / 0.0;
System.out.println("100除以0.0：" + a);

// 非0负数除以0，结果为负无穷。
double b = -100 / 0.0;
System.out.println("-100除以0.0：" + b);
```

此时运行示例程序，并查看控制台输出信息：

```text
100除以0.0：Infinity
-100除以0.0：-Infinity
```

由于浮点数使用科学记数法表示，整数部分至少为"1"，指数部分永远大于"0"，因此整个浮点数的值必不为"0"，"0.0"实际上是一个无穷小量，非0数值除以"0.0"时，就会得到无穷大(Infinity)。

正负无穷大的值定义在"float"与"double"对应的包装类中，以双精度浮点数为例，正无穷为 `Double.POSITIVE_INFINITY` ，负无穷为 `Double.NEGATIVE_INFINITY` ；我们可以利用这些常量判断计算结果是否为“无穷大”。

🔵 示例五：理解“无穷大”的含义。

在本示例中，我们对无穷大数值进行判等操作与类型转换。

"TestOperator.java":

```java
// 比较两个正无穷值
float x = 1 / 0.0F;
double y = 2 / 0.0;
System.out.println(x == y);
System.out.println(x == Double.POSITIVE_INFINITY);

// 将正无穷强制转换为整数
System.out.println((int) x);
System.out.println((long) x);
```

此时运行示例程序，并查看控制台输出信息：

```text
true
true
2147483647
9223372036854775807
```

根据上述输出内容可知：

"float"与"double"对应的正无穷值是相等的，并且不同表达式得到的正无穷值也是相等的。

如果我们将“正无穷”强制转换为"int"或"long"类型，会得到对应类型的最大值。

### 非数字
某些输入值对于表达式无效，这种情况的计算结果为"NaN"，含义为"Not a number"（这不是一个数字）。

🟣 示例六：理解"NaN"的含义。

在本示例中，我们列举一些结果为"NaN"的表达式，并对"NaN"数值进行判等操作。

"TestOperator.java":

```java
// 浮点型0除以0结果为"NaN"
double a = 0.0 / 0.0;
System.out.println("a = 0.0 / 0.0 = " + a);

// 负数的平方根结果为"NaN"
double b = Math.sqrt(-2);
System.out.println("b = sqrt(-2) = " + b);

// 比较两个NaN值是否相等
System.out.println("a == a ? " + (a == a));
System.out.println("a == b ? " + (a == b));
System.out.println("a is NaN ? " + Double.isNaN(a));
```

此时运行示例程序，并查看控制台输出信息：

```text
a = 0.0 / 0.0 = NaN
b = sqrt(-2) = NaN
a == a ? false
a == b ? false
a is NaN ? true
```

根据上述输出内容可知：

“浮点数0除以0”和“对负数开平方”都会得到"NaN"，并且无论表达式是否相同，两个"NaN"都是不相等的。

如果我们要判断变量值是否为"NaN"，可以使用 `Double.isNaN(double a)` 等方法。

# 比较运算符
比较运算符用于判断两个数值型变量值的相对大小，结果是一个布尔值。

常见的比较运算符可参见下文表格：

<div align="center">

| 运算符 |   名称   |       示例       | 结果  |
| :----: | :------: | :--------------: | :---: |
|  `>`   |   大于   | `a=5; b=1; a>b`  | true  |
|  `<`   |   小于   | `a=5; b=1; a<b`  | false |
|  `>=`  | 大于等于 | `a=1; b=3; a>=b` | false |
|  `<=`  | 小于等于 | `a=1; b=3; a<=b` | true  |
|  `==`  |   等于   | `a=5; b=3; a==b` | false |
|  `!=`  |  不等于  | `a=5; b=5; a!=b` | false |

</div>

`>` 、 `<` 、 `>=` 、 `<=` 两侧的操作数必须是基本数据类型， `==` 、 `!=` 两侧的操作数既可以是基本数据类型，也可以是引用数据类型；若操作数为引用数据类型，则比较的是两个变量所指向的内存地址是否相同，此处暂不涉及相关知识，详见相关章节：[🧭 面向对象 - 等值比较](../03_高级特性/01_面向对象/01_概述.md#等值比较)。

🟤 示例七：比较运算符的基本应用。

在本示例中，我们使用比较运算符操作变量。

"TestOperator.java":

```java
int a = 5;
int b = 1;

System.out.println("a>b: " + (a > b));
System.out.println("a<b: " + (a < b));

String s1 = "Test";
String s2 = "Test";
String s3 = new String("Test");
System.out.println("s1内容是否与s2相同：" + (s1 == s2));
System.out.println("s1内容是否与s3相同：" + (s1 == s3));
```

此时运行示例程序，并查看控制台输出信息：

```text
a>b: true
a<b: false
s1内容是否与s2相同：true
s1内容是否与s3相同：false
```

根据上述输出内容可知：

字符串 `s1` 、 `s2` 、 `s3` 的内容都是"Test"，但 `s1` 与 `s3` 的比较结果为"false"，这是因为它们虽然具有相同的内容，但内存地址并不相同。由此可见，我们不能通过 `==` 符号比较字符串内容是否相等，具体原理详见相关章节： [🧭 字符串 - 等值比较](../04_实用工具/01_文本处理/01_字符串.md#等值比较) 。

# 逻辑运算符
逻辑运算符主要用于对布尔值进行逻辑运算，结果也是一个布尔值。

常见的逻辑运算符可参见下文表格：

<div align="center">

| 运算符 |   名称   |            运算规则            |
| :----: | :------: | :----------------------------: |
|  `&&`  |  逻辑与  | 全部为真，结果为真，否则为假。 |
|  `&`   |  逻辑与  | 全部为真，结果为真，否则为假。 |
| `\|\|` |  逻辑或  | 全部为假，结果为假，否则为真。 |
|  `\|`  |  逻辑或  | 全部为假，结果为假，否则为真。 |
|  `^`   | 逻辑异或 | 两个操作数相同为假，不同为真。 |
|  `!`   |  逻辑非  |       对单个操作数取反。       |

</div>

运算符 `&` 和 `|` 按照正常的计算顺序，先计算符号两侧表达式的值，然后再进行逻辑运算。

运算符 `&&` 和 `||` 按照短路方式计算，例如表达式 `(1 > 2) && (1 < 3)` ，左边 `1 > 2` 结果为"false"，此时系统认为已经没有必要再计算右侧的 `1 < 3` ，直接返回"false"。同理，在表达式 `(1 > 2) || (1 < 3)` 中，如果确定左边的结果为"true"，将会直接返回"true"，系统不会再执行右侧的表达式。

对于纯粹的取值与判断场景，我们可以使用短路运算提高效率；对于右侧表达式包含赋值操作的场景，则需要小心地使用短路运算，因为表达式可能不会被执行。

🔴 示例八：普通运算与短路运算的区别。

在本示例中，我们比较普通运算与短路运算的区别。

我们定义变量 `a` ，初始值为"5"，我们希望 `a` 执行逻辑判断后数值增加"1"。

"TestOperator.java":

```java
int a = 5;

boolean b1 = false && (a++) == 6;
System.out.println("a = " + a);

boolean b2 = false & (a++) == 6;
System.out.println("a = " + a);
```

此时运行示例程序，并查看控制台输出信息：

```text
a = 5
a = 6
```

根据上述输出内容可知：

第一条逻辑运算语句中，与运算左侧表达式始终为"false"，因此短路与运算跳过了右侧表达式，导致变量 `a` 没有自增，与预期不符。

在此类场景中，我们只能使用普通运算符，确保右侧的赋值操作被顺利执行，不受左侧运算结果的影响。

# 位运算符
位运算符主要用于对数值型变量按位进行二进制运算，结果是一个布尔值。

常见的位运算符可参见下文表格：

<div align="center">

| 运算符 |    名称    |                  运算规则                   |
| :----: | :--------: | :-----------------------------------------: |
|  `&`   |   逻辑与   |              全1得1，否则为0。              |
|  `\|`  |   逻辑或   |              全0得0，否则为1。              |
|  `~`   |   逻辑非   |                   取反。                    |
|  `^`   |  异或运算  |             相同为0，不同为1。              |
|  `<<`  |    左移    |       将二进制左移指定位数，低位补0。       |
|  `>>`  |    右移    | 将二进制右移指定位数，高位补0，符号位不变。 |
| `>>>`  | 无符号右移 | 将二进制右移指定位数，高位补0，忽略符号位。 |

</div>

🟠 示例九：位运算符的基本应用。

在本示例中，我们使用位运算符进行位运算。

"TestOperator.java":

```java
int a = 0x25;		// 25H	-> 0010 0101B
int b = 0xCE;		// CEH	-> 1100 1110B
int m = a & b;	    // 4D	-> 0000 0100B
int n = a | b;	    // 239D	-> 1110 1111B
int o = ~a;		    // -38D	-> 1101 1010B
int p = a ^ b;	    // 235D	-> 1110 1011B
int x = a << 2;	    // 148D	-> 1001 0100B
int y = a >> 2;	    // 9D	-> 0000 1001B

System.out.println("a    = " + a);
System.out.println("b    = " + b);
System.out.println("a&b  = " + m);
System.out.println("a|b  = " + n);
System.out.println("~a   = " + o);
System.out.println("a^b  = " + p);
System.out.println("a<<2 = " + x);
System.out.println("a>>2 = " + y);
```

此时运行示例程序，并查看控制台输出信息：

```text
a    = 37
b    = 206
a&b  = 4
a|b  = 239
~a   = -38
a^b  = 235
a<<2 = 148
a>>2 = 9
```

根据上述输出内容可知：

按位取反之后的结果是补码，但控制台上显示的结果是原码。

# 条件运算符
条件运算符也被称为“三元运算符”，是一种简洁的判断与赋值语法，结构如下文代码块所示：

```text
<变量> = <逻辑表达式> ? <表达式A> : <表达式B>
```

如果逻辑表达式的值为"true"，则将“表达式A”的值赋给变量，否则将“表达式B”的值赋给变量。

下文示例展示了条件运算符的使用方法。

🟡 示例十：条件运算符的基本应用。

在本示例中，我们定义两个变量 `a` 与 `b` ，如果 `a` 大于 `b` 则将 `a` 的100倍赋值给变量 `c` ；反之将 `b` 的100倍赋值给 `c` 。

"TestOperator.java":

```java
int a = 1;
int b = 2;

int c = (a > b) ? (a * 100) : (b * 100);
System.out.println("c = " + c);
```

此时运行示例程序，并查看控制台输出信息：

```text
c = 200
```

根据上述输出内容可知：

变量 `a` 的值小于变量 `b` 的值，因此表达式结果为"false"，执行表达式 `b * 100` 并将最终结果赋值给变量 `c` ，最终变量 `c` 的值为200。

上述代码也可以使用逻辑判断语句"if"书写：

```java
 int a = 1;
 int b = 2;
 int c;

 if (a >= b) {
     c = a * 100;
 } else {
     c = b * 100;
 }
 System.out.println("c = " + c);
```

关于逻辑判断语句的相关知识将在后文章节 [🧭 流程控制](./04_流程控制.md) 中进一步介绍。
